(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-create"],{"0286":function(t,e,o){"use strict";o.r(e);var n=o("1c4e"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"03ec":function(t,e,o){var n=o("b67e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("11139893",n,!0,{sourceMap:!1,shadowMode:!1})},"0568":function(t,e,o){"use strict";o.r(e);var n=o("624d"),i=o("5890");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("05f6");var s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"252f08b0",null,!1,n["a"],void 0);e["default"]=u.exports},"05f6":function(t,e,o){"use strict";var n=o("0ec5"),i=o.n(n);i.a},"0ec5":function(t,e,o){var n=o("e708");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("db4d484e",n,!0,{sourceMap:!1,shadowMode:!1})},"1b4d":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={useMask:o("9ab2").default},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.visibleSync?o("v-uni-view",{staticClass:"pos-f pos-full overflow-hidden use-popup",class:{"use-popup-visible":t.showPopup},style:[t.customStyle]},[o("use-mask",{attrs:{show:t.showPopup&&t.mask,maskClickAble:t.maskCloseAble},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.maskClick.apply(void 0,arguments)}}}),o("v-uni-view",{staticClass:"pos-a use-popup-content",class:[t.bgclass,t.safeAreaInsetBottom?"safe-area-inset-bottom":"","use-popup-"+t.mode,t.showPopup?"use-popup-content-visible":"",t.zoom&&"center"==t.mode?"use-animation-zoom":""],style:[t.style],on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},click:[function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},function(e){arguments[0]=e=t.$handleEvent(e),t.modeCenterClose(t.mode)}]}},["center"==t.mode?o("v-uni-view",{staticClass:"bg-main pos-r use-mode-center-box",style:[t.centerStyle],on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[t._t("default")],2):[t._t("default")]],2)],1):t._e()},a=[]},"1c4e":function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("a9e3"),o("ac1f"),o("00b4"),o("99af");var n={props:{show:{type:Boolean,default:!1},mode:{type:String,default:"left"},mask:{type:Boolean,default:!0},bgclass:{type:String,default:"bg-main"},length:{type:[Number,String],default:"auto"},zoom:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},customStyle:{type:Object,default:function(){return{}}},value:{type:Boolean,default:!1},popup:{type:Boolean,default:!0},borderRadius:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:"10020"}},data:function(){return{visibleSync:!1,showPopup:!1}},watch:{value:function(t){t?this.open():this.showPopup&&this.close()}},computed:{style:function(){var t={},e="100%",o=/%$/.test(this.length)||"auto"==this.length?this.length:uni.upx2px(this.length)+"px";if("left"!=this.mode&&"top"!=this.mode||(e="auto"==o?"-100%":"-"+o),"left"==this.mode||"right"==this.mode?t={width:o,height:"100%",transform:"translate3D(".concat(e,",0px,0px)")}:"top"!=this.mode&&"bottom"!=this.mode||(t={width:"100%",height:o,transform:"translate3D(0px,".concat(e,",0px)")}),t.zIndex=this.zIndex,this.borderRadius){switch(this.mode){case"top":t.borderRadius="0 0 ".concat(this.borderRadius,"rpx ").concat(this.borderRadius,"rpx");break;case"right":t.borderRadius="".concat(this.borderRadius,"rpx 0 0 ").concat(this.borderRadius,"rpx");break;case"bottom":t.borderRadius="".concat(this.borderRadius,"rpx ").concat(this.borderRadius,"rpx 0 0");break;case"left":t.borderRadius="0 ".concat(this.borderRadius,"rpx ").concat(this.borderRadius,"rpx 0");break;default:break}t.overflow="hidden"}return t},centerStyle:function(){var t={},e=/%$/.test(this.length)||"auto"==this.length?this.length:uni.upx2px(this.length)+"px";return t.width=e,t.zIndex=this.zIndex,this.borderRadius&&(t.borderRadius="".concat(this.borderRadius,"rpx"),t.overflow="hidden"),t}},created:function(){var t=this;this.visibleSync=this.value,this.$api.timerout((function(){t.showPopup=t.value}),30)},methods:{open:function(){this.change("visibleSync","showPopup",!0)},close:function(){this.change("showPopup","visibleSync",!1)},maskClick:function(){this.close()},modeCenterClose:function(t){"center"==t&&this.maskCloseAble&&this.close()},change:function(t,e,o){var n=this;this.popup&&this.$emit("input",o),this[t]=o,this.$api.timerout((function(){n[e]=o,n.$emit(o?"open":"close")}),o?30:100)}}};e.default=n},2269:function(t,e,o){"use strict";o.r(e);var n=o("9446"),i=o("f88a");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("4f5d");var s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"566413de",null,!1,n["a"],void 0);e["default"]=u.exports},"242d":function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("a9e3");var n={props:{isMax:{type:Boolean,default:!1},isMin:{type:Boolean,default:!1},index:{type:Number,default:0},value:{type:Number,default:0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},direction:{type:String,default:"left"}},data:function(){return{inputValue:0,minDisabled:!1,maxDisabled:!1}},created:function(){this.inputValue=this.value,this.maxDisabled=this.isMax,this.minDisabled=this.isMin},computed:{},watch:{value:function(t,e){this.inputValue=t},inputValue:function(t,e){}},methods:{_calcValue:function(t){var e=this._getDecimalScale(),o=this.inputValue*e,n=0,i=this.step*e;"subtract"===t?(n=o-i,n<=this.min&&(this.minDisabled=!0),n<this.min&&(n=this.min),n<this.max&&!0===this.maxDisabled&&(this.maxDisabled=!1)):"add"===t&&(n=o+i,n>=this.max&&(this.maxDisabled=!0),n>this.max&&(n=this.max),n>this.min&&!0===this.minDisabled&&(this.minDisabled=!1)),n!==o&&(this.inputValue=n/e,this.onChange())},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=this;console.log("_onBlur",t);var o=t.detail.value;if(!o)return this.inputValue=0,void this.onChange();o=+o,o>this.max?o=this.max:o<this.min&&(o=this.min),this.inputValue=0,this.$nextTick((function(){e.inputValue=o,e.onChange()}))},onChange:function(){var t={number:this.inputValue,index:this.index};this.$emit("eventChange",t)}}};e.default=n},4450:function(t,e,o){var n=o("74cc");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("50422f00",n,!0,{sourceMap:!1,shadowMode:!1})},"4d5f":function(t,e,o){"use strict";o.r(e);var n=o("d2b9"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"4f38":function(t,e,o){"use strict";var n=o("c82d"),i=o.n(n);i.a},"4f5d":function(t,e,o){"use strict";var n=o("03ec"),i=o.n(n);i.a},5079:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.use-popup[data-v-d84d083e]{z-index:10010}.use-popup-content[data-v-d84d083e]{z-index:10020;transition:all .25s ease-in-out}.use-popup-top[data-v-d84d083e]{top:0;right:0;left:0}.use-popup-right[data-v-d84d083e]{top:0;right:0;bottom:0}.use-popup-bottom[data-v-d84d083e]{right:0;bottom:0;left:0}.use-popup-left[data-v-d84d083e]{top:0;bottom:0;left:0}.use-popup-center[data-v-d84d083e]{display:flex;align-items:center;justify-content:center;flex-direction:column;top:0;right:0;bottom:0;left:0;opacity:0;z-index:99999}.use-mode-center-box[data-v-d84d083e]{min-width:%?100?%;min-height:%?100?%}.use-popup-content-visible.use-popup-center[data-v-d84d083e]{-webkit-transform:scale(1);transform:scale(1);opacity:1}.use-animation-zoom[data-v-d84d083e]{-webkit-transform:scale(1.15);transform:scale(1.15)}.use-popup-content-visible[data-v-d84d083e]{-webkit-transform:translateZ(0)!important;transform:translateZ(0)!important}',""]),t.exports=e},"55cc":function(t,e,o){"use strict";o.r(e);var n=o("1b4d"),i=o("0286");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("4f38");var s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"d84d083e",null,!1,n["a"],void 0);e["default"]=u.exports},5707:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("a9e3");var n={props:{type:{type:String,default:"square"},title:{type:String,default:"列表标题"},size:{type:String,default:"28"},fwt:{type:String,default:"normal"},tip:{type:[String,Number],default:""},iconfont:{type:String,default:"icondaifahuo-"},color:{type:String,default:"#C0C4CC"},rightIcon:{type:String,default:"iconjiantou-01"},rightColor:{type:String,default:"#c0c0c0"}},data:function(){return{}},methods:{goto:function(){console.log("goto"),this.$emit("goto",{type:"goto"})}}};e.default=n},5890:function(t,e,o){"use strict";o.r(e);var n=o("5707"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},"624d":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{class:"round"==t.type?"padding-lr-sm":""},[o("v-uni-view",{staticClass:"use-list-title dflex-b padding-lr w-full bg-main",class:"round"==t.type?"border-radius":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goto.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"dflex"},[t.iconfont&&" "!=t.iconfont?o("v-uni-view",{staticClass:"iconfont __left margin-right-sm",class:t.iconfont,style:{color:t.color}}):t._e(),o("v-uni-text",{style:{fontSize:t.size+"rpx",fontWeight:t.fwt}},[t._v(t._s(t.title))])],1),o("v-uni-view",{staticClass:"dflex"},[t.tip?o("v-uni-text",{staticClass:"tip margin-right-xs"},[t._v(t._s(t.tip))]):t._e(),o("v-uni-view",{staticClass:"iconfont fs-sm",class:t.rightIcon,style:{color:t.rightColor}})],1)],1)],1)},i=[]},6608:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"use-mask pos-f pos-full overflow-hidden",class:[t.show?"use-mask-show":""],style:[t.maskStyle],on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.click.apply(void 0,arguments)}}},[t._t("default")],2)},i=[]},"69e7":function(t,e,o){"use strict";o.r(e);var n=o("c6e9"),i=o("d5a4");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("925e");var s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"88ab23b4",null,!1,n["a"],void 0);e["default"]=u.exports},"74cc":function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,".use-numbox[data-v-88ab23b4]{position:absolute;background:#f5f5f5}.use-numbox.left[data-v-88ab23b4]{left:%?30?%;bottom:0}.use-numbox.right[data-v-88ab23b4]{right:0;bottom:0}.use-numbox-minus[data-v-88ab23b4],\n.use-numbox-plus[data-v-88ab23b4]{margin:0;background-color:#f5f5f5;padding:%?12?% %?20?%}.use-numbox-minus .iconfont[data-v-88ab23b4],\n.use-numbox-plus .iconfont[data-v-88ab23b4]{color:#555;font-weight:700}.use-numbox-minus[data-v-88ab23b4]{border-right:none;border-top-left-radius:%?6?%;border-bottom-left-radius:%?6?%}.use-numbox-plus[data-v-88ab23b4]{border-left:none;border-top-right-radius:%?6?%;border-bottom-right-radius:%?6?%}.use-numbox-value[data-v-88ab23b4]{background-color:#f5f5f5;width:%?66?%;height:%?50?%;padding:0}.use-numbox-disabled.iconfont[data-v-88ab23b4]{color:#bbb}",""]),t.exports=e},"925e":function(t,e,o){"use strict";var n=o("4450"),i=o.n(n);i.a},9446:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return n}));var n={useListTitle:o("0568").default,useNumberBox:o("69e7").default,usePopup:o("55cc").default},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("v-uni-view",{staticClass:"gap"}),t.addrData&&t.addrData._id?o("v-uni-view",{staticClass:"padding dflex-b bg-main",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toaddr.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"dflex"},[o("v-uni-view",{staticClass:"iconfont icondizhi- margin-right ft-main"}),o("v-uni-view",{staticClass:"w-full dflex-wrap-w"},[o("v-uni-view",{staticClass:"margin-bottom-xs"},[o("v-uni-text",[t._v(t._s(t.addrData.address)+" "+t._s(t.addrData.addr_detail))])],1),o("v-uni-view",[o("v-uni-text",[t._v(t._s(t.addrData.consignee))]),o("v-uni-text",{staticClass:"margin-left"},[t._v(t._s(t.addrData.mobile))])],1)],1)],1),o("v-uni-view",{staticClass:"iconfont iconjiantou-01 fs-sm"})],1):o("use-list-title",{attrs:{color:"#333",title:"选择收货人",iconfont:"icondizhi-"},on:{goto:function(e){arguments[0]=e=t.$handleEvent(e),t.toaddr.apply(void 0,arguments)}}}),o("v-uni-view",{staticClass:"gap"}),o("v-uni-view",{staticClass:"goods-area bg-main padding"},t._l(t.goodsDatas,(function(e,n){return o("v-uni-view",{key:n,staticClass:"goods-item",class:{"margin-top":n>0}},[o("v-uni-view",{staticClass:"pos-r"},[o("v-uni-image",{attrs:{mode:"aspectFill",src:e.goods.img}}),e.goods.stock_num<10||e.goods.stock_num<e.goods.goods_num?o("v-uni-view",{staticClass:"disabled dflex-c dflex-flow-c pos-a pos-tl-c border-radius-c"},[o("v-uni-text",[t._v("库存不足")]),e.goods.stock_num>0?o("v-uni-text",{staticClass:"margin-left-xs fs-xs"},[t._v("剩余\n\t\t\t\t\t\t"+t._s(e.goods.stock_num))]):t._e()],1):t._e()],1),o("v-uni-view",{staticClass:"flex1 padding-left-sm"},[o("v-uni-text",{staticClass:"title clamp-2"},[t._v(t._s(e.goods.name||"")+" "+t._s(e.goods.name_pw||""))]),o("v-uni-view",{staticClass:"ft-dark fs-xs padding-top-xs"},[t.cart_ids&&t.cart_ids.length>0?o("v-uni-text",{staticClass:"margin-right"},[t._v("× "+t._s(e.cart.goods_num))]):t._e(),t._v(t._s(e.goods_sku&&e.goods_sku.spec||"  "))],1),o("v-uni-view",{staticClass:"pos-r dflex-b padding-top"},[o("v-uni-view",{staticClass:"price flex1"},[t._v(t._s(e.goods.price/100||""))]),t.cart_ids&&t.cart_ids.length>0?t._e():o("use-number-box",{attrs:{min:1,max:e.goods.stock_num,value:e.goods.goods_num>e.goods.stock_num?e.goods.stock_num:e.goods.goods_num,"is-max":e.goods.goods_num>=e.goods.stock_num,"is-min":1===e.goods.goods_num,index:n,direction:"right"},on:{eventChange:function(e){arguments[0]=e=t.$handleEvent(e),t.numberChange.apply(void 0,arguments)}}})],1)],1)],1)})),1),o("v-uni-view",{staticClass:"gap"}),o("use-list-title",{attrs:{title:"优惠券",tip:t.couponName,color:"#333",iconfont:"iconyouhui"},on:{goto:function(e){arguments[0]=e=t.$handleEvent(e),t.couponShow=!0}}}),o("use-popup",{attrs:{mode:"bottom"},on:{open:function(e){arguments[0]=e=t.$handleEvent(e),t.couponOpen.apply(void 0,arguments)}},model:{value:t.couponShow,callback:function(e){t.couponShow=e},expression:"couponShow"}},[o("v-uni-view",{staticClass:"coupon-area padding bg-drak"},[t._l(t.couponDatas,(function(e,n){return o("v-uni-view",{key:n,staticClass:"coupon-item bg-main pos-r fs-xs"},[o("v-uni-view",{staticClass:"content pos-r padding dflex-b"},[o("v-uni-view",{},[o("v-uni-view",{staticClass:"margin-bottom-xs fs"},[t._v(t._s(e.name))]),o("v-uni-view",{staticClass:"ft-dark"},[t._v("有效期至 "+t._s(e.end_time.split(" ")[0]))])],1),o("v-uni-view",{staticClass:"tar"},[o("v-uni-view",{staticClass:"margin-bottom-xs price"},[t._v(t._s(e.price))]),e.order_amount>0?o("v-uni-view",{staticClass:"ft-dark"},[t._v("满"+t._s(e.order_amount)+"可用")]):o("v-uni-view",{staticClass:"ft-dark"},[t._v("不限")])],1),o("v-uni-view",{staticClass:"circle l"}),o("v-uni-view",{staticClass:"circle r"})],1),o("v-uni-view",{staticClass:"dflex-b"},[o("v-uni-text",{staticClass:"ft-dark padding-lr"},[t._v(t._s(e.type))]),o("v-uni-text",{staticClass:"ft-base padding-tb-sm padding-lr",on:{click:function(o){arguments[0]=o=t.$handleEvent(o),t.couponUse(e)}}},[t._v("立即使用")])],1)],1)})),!t.couponDatas||t.couponDatas.length<=0?o("v-uni-view",{staticClass:"coupon-none"},[o("v-uni-text",{staticClass:"coupon-none-tip"},[t._v("开发中!!!!!")])],1):t._e()],2)],1),o("v-uni-view",{staticClass:"gap"}),o("v-uni-view",{staticClass:"bg-main"},[o("v-uni-view",{staticClass:"dflex-b padding-lr padding-tb-sm"},[o("v-uni-view",{staticClass:"flex1"},[t._v("总金额")]),o("v-uni-view",{},[o("v-uni-text",{staticStyle:{"font-size":"24rpx"}},[t._v("￥")]),t._v(t._s(t.goods_money))],1)],1),t.total_coupon_money>0?o("v-uni-view",{staticClass:"dflex-b padding-lr padding-tb-sm"},[o("v-uni-view",{staticClass:"flex1"},[t._v("优惠金额")]),o("v-uni-view",{staticClass:"ft-base"},[t._v("-￥"+t._s(t.total_coupon_money))])],1):t._e(),o("v-uni-view",{staticClass:"dflex-b padding-lr padding-tb-sm"},[o("v-uni-view",{staticClass:"margin-right-xl"},[t._v("备注")]),o("v-uni-input",{staticClass:"flex1 padding-sm",attrs:{type:"text",placeholder:"请填写买家备注","placeholder-class":"placeholder"},model:{value:t.order_desc,callback:function(e){t.order_desc=e},expression:"order_desc"}})],1)],1),o("v-uni-view",{staticClass:"gap"}),o("v-uni-view",{staticClass:"oper-area pos-f pos-bottom w-full dflex-b bg-main safe-area-inset-bottom padding-left"},[o("v-uni-view",[o("v-uni-text",{staticClass:"fs-sm"},[t._v("实付款")]),o("v-uni-text",{staticClass:"price margin-left-sm fs-xl"},[t._v(t._s(t.total_money))])],1),o("v-uni-view",{staticClass:"submit dflex-c bg-base fs animated-all",class:1===t.is_submit?"bg-disabled":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交订单")])],1)],1)},a=[]},9517:function(t,e,o){"use strict";var n=o("b701"),i=o.n(n);i.a},"9ab2":function(t,e,o){"use strict";o.r(e);var n=o("6608"),i=o("4d5f");for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o("9517");var s=o("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"08557517",null,!1,n["a"],void 0);e["default"]=u.exports},b33d:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("d3b7"),o("159b");var n={data:function(){return{addrData:{},goodsDatas:[],goods_money:0,couponShow:!1,couponName:"选择优惠券",couponDatas:[],coupon_type:"满减",coupon_money:0,total_money:0,total_coupon_money:0,cart_ids:[],goods_id:0,goods_num:1,goods_sku_id:0,order_coupon_id:0,order_desc:"",is_submit:1,platform:"",platform_name:""}},onLoad:function(t){var e=this;this.$api.get_env((function(t){e.platform=t.platform,e.platform_name=t.platform_name})),this.goods_id=t.goods_id||"",this.goods_sku_id=t.sku_id||"",t.cart_ids&&(this.cart_ids=t.cart_ids.split(",")),this.loadData(),uni.$on("__event_choice_address",(function(t){e.addrData=t}))},onShow:function(){var t=this;this.addrData&&this.addrData._id||this.$db["usemall-member-address"].where("create_uid == $env.uid").tofirst().then((function(e){console.log("res",e),e&&200===e.code&&(t.addrData=e.datas)}))},methods:{loadData:function(){var t=this;this.$func.usemall.call("goods/detail2order",{cart_ids:this.cart_ids,goods_id:this.goods_id,goods_sku_id:this.goods_sku_id}).then((function(e){if(200===e.code)return t.goodsDatas=e.datas,t.calcTotalMoney(),void(t.is_submit=0);t.$api.msg(e.msg)}))},calcTotalMoney:function(){var t=this;this.goods_money=0,this.goodsDatas.forEach((function(e){e.goods_sku&&e.goods_sku.price&&(e.goods.price=e.goods_sku.price,e.goods.stock_num=e.goods_sku.stock_num),e.cart&&e.cart.goods_num&&(e.goods.goods_num=e.cart.goods_num),t.goods_money+=e.goods.price/100*e.goods.goods_num})),"满减"==this.coupon_type?(this.total_coupon_money=this.coupon_money,this.total_money=(this.goods_money+0-this.coupon_money).toFixed(2)):"折扣"==this.coupon_type&&(this.total_coupon_money=this.goods_money+0-((this.goods_money+0)*this.coupon_money).toFixed(2),this.total_money=((this.goods_money+0)*this.coupon_money).toFixed(2))},numberChange:function(t){var e=this.goodsDatas[t.index];e.goods.goods_num=t.number,this.goods_id&&(this.goods_num=t.number),this.calcTotalMoney()},couponOpen:function(){},couponUse:function(t){this.order_coupon_id=t._id,this.coupon_money=t.price,this.coupon_type=t.type,this.couponName=t.name,this.calcTotalMoney(),this.couponShow=!1},submit:function(){if(this.addrData&&this.addrData._id)if(this.is_submit)this.$api.msg("提交中");else{this.is_submit=1;var t=this,e={cart_ids:t.cart_ids,goods_id:t.goods_id,goods_num:t.goods_num,goods_sku_id:t.goods_sku_id,order_coupon_id:t.order_coupon_id,order_integral:0,order_use_integral:0,addr_id:t.addrData._id,order_from:t.platform_name,order_desc:t.order_desc};this.$func.usemall.call("order/create",e).then((function(e){200!==e.code?(t.$api.msg(e.msg),t.$api.timerout((function(){t.is_submit=0}),800)):t.$api.topay({order_id:e.datas.order_id,money:e.datas.money,type:"redirect"})}))}else this.$api.msg("请选择收货人")},toaddr:function(){uni.navigateTo({url:"/pages/user/address/address?source=1",complete:function(){}})}}};e.default=n},b67e:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-566413de]{background:#f5f5f5;padding-bottom:%?100?%}body.?%PAGE?%[data-v-566413de]{background:#f5f5f5}.goods-area .goods-item[data-v-566413de]{display:flex}.goods-area .goods-item .disabled[data-v-566413de]{color:#fff!important;width:70%;height:70%;background-color:rgba(51,51,51,.5)}.goods-area .goods-item uni-image[data-v-566413de]{flex-shrink:0;display:block;width:%?180?%;height:%?180?%;border-radius:%?4?%}.oper-area[data-v-566413de]{z-index:998;box-shadow:0 -1px 5px rgba(0,0,0,.1)}.oper-area .submit[data-v-566413de]{width:%?280?%;height:%?100?%}\n/* 优惠券区 */.coupon-area[data-v-566413de]{max-height:60vh;overflow:auto}.coupon-area .coupon-item[data-v-566413de]{margin-bottom:%?20?%}.coupon-area .coupon-item[data-v-566413de]:last-child{margin-bottom:0}.coupon-area .coupon-item .content[data-v-566413de]:after{position:absolute;left:0;bottom:0;content:"";width:100%;height:0;border-bottom:1px dashed #f3f3f3;-webkit-transform:scaleY(50%);transform:scaleY(50%)}.coupon-area .coupon-item .circle[data-v-566413de]{position:absolute;bottom:%?-10?%;z-index:10;width:%?20?%;height:%?20?%;background:#f5f5f5;border-radius:50%}.coupon-area .coupon-item .circle.r[data-v-566413de]{right:%?-6?%}.coupon-area .coupon-item .circle.l[data-v-566413de]{left:%?-6?%}.coupon-none[data-v-566413de]{width:100%;height:100%;line-height:30vh;display:flex;align-items:center;justify-content:center}.coupon-none .coupon-none-tip[data-v-566413de]{color:#909399}',""]),t.exports=e},b701:function(t,e,o){var n=o("c258");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("445676b5",n,!0,{sourceMap:!1,shadowMode:!1})},c258:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.use-mask[data-v-08557517]{opacity:0;background-color:rgba(0,0,0,.6)}.use-mask-show[data-v-08557517]{opacity:1;visibility:visible;-webkit-transform:scale(1);transform:scale(1)}',""]),t.exports=e},c6e9:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"use-numbox pos-a dflex-c border-radius-big",class:t.direction},[o("v-uni-view",{staticClass:"use-numbox-minus pos-r tac h-full",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t._calcValue("subtract")}}},[o("v-uni-text",{staticClass:"iconfont iconjian fs-sm",class:t.minDisabled?"use-numbox-disabled":""})],1),o("v-uni-input",{staticClass:"use-numbox-value pos-r tac",attrs:{type:"number",disabled:t.disabled,value:t.inputValue},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t._onBlur.apply(void 0,arguments)}}}),o("v-uni-view",{staticClass:"use-numbox-plus pos-r tac h-full",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t._calcValue("add")}}},[o("v-uni-text",{staticClass:"iconfont iconjia fs-sm",class:t.maxDisabled?"use-numbox-disabled":""})],1)],1)},i=[]},c82d:function(t,e,o){var n=o("5079");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("187765ca",n,!0,{sourceMap:!1,shadowMode:!1})},d2b9:function(t,e,o){"use strict";o("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("a9e3");var n={props:{show:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:"10000"},zoom:{type:Boolean,default:!0},duration:{type:[Number,String],default:300},maskClickAble:{type:Boolean,default:!0}},computed:{maskStyle:function(){var t={transition:"all ".concat(this.duration/1e3,"s ease-in-out"),zIndex:this.zIndex};return this.show?t.zIndex=this.zIndex:t.zIndex=-1,this.zoom&&(t.transform="scale(1.2, 1.2)"),t}},methods:{click:function(){this.maskClickAble&&this.$emit("click")}}};e.default=n},d5a4:function(t,e,o){"use strict";o.r(e);var n=o("242d"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a},e708:function(t,e,o){var n=o("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.use-list-title[data-v-252f08b0]{height:%?100?%;line-height:%?100?%}.use-list-title .__left[data-v-252f08b0]{font-size:%?40?%}.use-list-title .iconfont[data-v-252f08b0]{color:silver}.use-list-title .tip[data-v-252f08b0]{font-size:%?24?%;color:silver}',""]),t.exports=e},f88a:function(t,e,o){"use strict";o.r(e);var n=o("b33d"),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e["default"]=i.a}}]);