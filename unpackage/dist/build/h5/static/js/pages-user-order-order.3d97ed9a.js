(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-order-order"],{"091e":function(t,e,n){var a=n("aa03");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("58bfa9fd",a,!0,{sourceMap:!1,shadowMode:!1})},"35e1":function(t,e,n){"use strict";n.r(e);var a=n("c708"),i=n("c904");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("9ee5e");var o=n("f0c5"),d=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"338d854c",null,!1,a["a"],void 0);e["default"]=d.exports},"5a2e":function(t,e,n){var a=n("bc22");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("1840cccc",a,!0,{sourceMap:!1,shadowMode:!1})},"80c0":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("7db0"),n("d3b7");var a={props:{eStyle:{type:String,default:"square"},eType:{type:String,default:"other"},tip:{type:String,default:"暂无数据"},btnTip:{type:String,default:"去逛逛"},btnGoto:{type:String,default:"/pages/tabbar/home"},auto:{type:Boolean,default:!0},height:{type:String,default:"100vh"}},computed:{dtype:{get:function(){var t=this;console.log("get dtype",arguments);var e=this.imgs.find((function(e){return e.type==t.eType}));return this.imgurl=e?e.url:this.imgurl_dft,this.eType},set:function(t){console.log("set dtype",arguments)}}},data:function(){return{imgurl_dft:"/static/images/empty/empty.jpg",imgurl:"",imgs:[{type:"cart",url:"/static/images/empty/cart.jpg"},{type:"search",url:"/static/images/empty/search.jpg"},{type:"other",url:"/static/images/empty/empty.jpg"}]}},methods:{to:function(){this.$emit("goto",{type:"goto"}),this.auto&&uni.switchTab({url:this.btnGoto})}}};e.default=a},"835c":function(t,e,n){var a=n("e89f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("c5e69b4c",a,!0,{sourceMap:!1,shadowMode:!1})},9338:function(t,e,n){"use strict";var a=n("835c"),i=n.n(a);i.a},"9a20":function(t,e,n){"use strict";n.r(e);var a=n("80c0"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"9af8":function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("c7eb")),r=a(n("2909")),o=a(n("1da1")),d=a(n("5530"));n("7db0"),n("d3b7"),n("159b"),n("14d9"),n("99af");var s=n("26cb"),c={data:function(){return{tabCurrentIndex:0,navData:{},navList:[{id:0,state:"全部",loadingType:"more",orderList:[]},{id:1,state:"待付款",loadingType:"more",orderList:[]},{id:2,state:"待发货",loadingType:"more",orderList:[]},{id:3,state:"待收货",loadingType:"more",orderList:[]},{id:4,state:"待评价",loadingType:"more",orderList:[]}],reqdata:{page:1,rows:10},scrollLeft:0,title:"全部"}},watch:{tabCurrentIndex:function(t,e){this.loadData("tab_change",1)}},onShow:function(t){var e=this;if(this.islogin){var n="";uni.getStorage({key:"__order_state",success:function(t){n=t.data;var a=e.navList.find((function(t){return t.state==n}));a&&(e.tabCurrentIndex=a.id),uni.removeStorage({key:"__order_state"})},complete:function(){e.loadData("refresh")}})}else uni.showModal({title:"授权登录",success:function(t){t.confirm?e.$api.tologin():t.cancel&&e.$api.tohome()}})},onLoad:function(t){var e=this;uni.$on("__event_order",(function(t){"refresh"==t&&e.loadData("refresh")}))},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.loadData()},computed:(0,d.default)({},(0,s.mapState)(["islogin"])),methods:{loadData:function(){var t=arguments,e=this;return(0,o.default)((0,i.default)().mark((function n(){var a,o,d;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:"add",o=t.length>1?t[1]:void 0,d=e.navList[e.tabCurrentIndex],e.title=d.state,console.log(e.title),console.log("loadData cur_nav",d),"loading"!==d.loadingType){n.next=8;break}return n.abrupt("return");case 8:if(e.reqdata.state=d.state,1!=o&&"refresh"!=a||(e.reqdata.page=1),a.type&&(a.type=a.type.toLowerCase()),"add"!==a&&"scrolltolower"!=a.type){n.next=17;break}if("nomore"!=d.loadingType){n.next=14;break}return n.abrupt("return");case 14:d.loadingType="loading",n.next=18;break;case 17:d.loadingType="more";case 18:return n.next=20,e.$func.usemall.call("order/list",e.reqdata).then((function(t){if(200===t.code){if(d.loaded=!0,200===t.code)if(1!=o&&"refresh"!=a||(d.orderList=[],d.hasmore=0),t.datas.length>0){var n=[];t.datas.forEach((function(t){n.push(t)})),d.orderList=[].concat((0,r.default)(d.orderList),n),t.datas.length>=e.reqdata.rows?(1==e.reqdata.page&&(d.hasmore=!0),e.reqdata.page++,d.loadingType="more"):d.loadingType="nomore"}else d.loadingType="nomore";1==o?uni.hideLoading():"refresh"==a&&uni.stopPullDownRefresh(),e.navData=d}}));case 20:case"end":return n.stop()}}),n)})))()},changeTab:function(t){this.tabCurrentIndex=t.target.current},tabClick:function(t){this.tabCurrentIndex=t},todetail:function(t){uni.navigateTo({url:"/pages/user/order/order-detail?order_id=".concat(t.order_id)})},payment:function(t){"待核实"!=t.order_pay_state?this.$api.topay({order_id:t.order_id,money:t.order_actural_paid}):this.$api.msg("订单已支付待核实状态")},delOrder:function(t){var e=this;uni.showModal({title:"提示",content:"删除订单",success:function(n){n.confirm?(uni.showLoading({title:"请稍后"}),e.$func.usemall.call("order/deleted",{order_id:t.order.order_id}).then((function(t){200===t.code&&e.loadData("tab_change",1)}))):n.cancel&&console.log("点击取消")},complete:function(){uni.hideLoading()}})},cancelOrder:function(t){var e=this;uni.showModal({title:"提示",content:"取消订单",success:function(n){n.confirm?(uni.showLoading({title:"请稍后"}),e.$func.usemall.call("order/cancel",{order_id:t.order.order_id,state:"已取消"}).then((function(t){200===t.code&&e.loadData("tab_change",1)}))):n.cancel&&console.log("用户点击取消")},complete:function(){uni.hideLoading()}})},toexpress:function(t){uni.navigateTo({url:"/pages/user/order/order-express?order_id=".concat(t.order.order_id)})},toreceipt:function(t){var e=this;uni.showModal({title:"提示",content:"确认收货",success:function(n){n.confirm?(uni.showLoading({title:"请稍后"}),e.$func.usemall.call("order/received",{order_id:t.order.order_id,state:"待评价"}).then((function(t){e.loadData("tab_change",1)}))):n.cancel&&console.log("用户点击取消")},complete:function(){uni.hideLoading()}})},torefund:function(t){uni.navigateTo({url:"/pages/user/order/order-refund?order_id=".concat(t.order.order_id)})},toevaluate:function(t){uni.navigateTo({url:"/pages/user/order/order-evaluate?id=".concat(t.order.order_id)})}}};e.default=c},"9d4a":function(t,e,n){"use strict";n.r(e);var a=n("d510"),i=n("c3b7");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("f1e7");var o=n("f0c5"),d=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"fb8b119e",null,!1,a["a"],void 0);e["default"]=d.exports},"9ee5e":function(t,e,n){"use strict";var a=n("091e"),i=n.n(a);i.a},a3a3:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{type:{type:String,default:"more"},tip:{type:String,default:""},defaults:{type:Object,default:function(){return{more:"上拉显示更多",loading:"用云 · 让开发更简单",nomore:"已经到底了"}}}},data:function(){return{}},computed:{},methods:{}};e.default=a},aa03:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-338d854c],\n.container[data-v-338d854c]{min-height:100%;background:#f5f5f5}body.?%PAGE?%[data-v-338d854c]{background:#f5f5f5}\n/* 订单状态区 */.navbar-area[data-v-338d854c]{white-space:nowrap}.state-area[data-v-338d854c]{height:7vh;box-shadow:0 1px 5px rgba(0,0,0,.06);z-index:10;top:0}.nav-item[data-v-338d854c]{flex:1}.nav-item.active[data-v-338d854c]:after{content:"";position:absolute;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);bottom:0;width:44px;height:0;border-bottom:2px solid #ff6a6c}\n/* 订单轮播区 */.swiper-area[data-v-338d854c]{height:93vh}\n/* 订单区 */\n/* 订单项 */.order-item[data-v-338d854c]{\n  /* 订单商品明细区 */\n  /* 操作按钮 */}.order-item .goods-area[data-v-338d854c]{display:flex}.order-item .goods-area uni-image[data-v-338d854c]{width:%?180?%;height:%?180?%}.order-item .goods-area .right[data-v-338d854c]{padding:0 %?30?% 0 %?24?%;overflow:hidden}.order-item .goods-area .right .attr-box[data-v-338d854c]{font-size:%?26?%;color:#909399;padding:%?10?% %?12?%}.order-item .action-btn[data-v-338d854c]{width:%?156?%;height:inherit;line-height:inherit;margin:0;margin-left:%?20?%;padding:%?12?% 0;font-size:%?26?%;color:#303133}.order-item .action-btn[data-v-338d854c]:after{border-radius:100px}.order-item .action-btn.main-btn[data-v-338d854c]{background:#fff9f9;color:#ff6a6c}.order-item .action-btn.main-btn[data-v-338d854c]:after{border-color:#f7bcc8}',""]),t.exports=e},bc22:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */',""]),t.exports=e},c276:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"use-empty-container tac",class:"round"==t.eStyle?"padding-sm":"",style:{height:t.height}},[n("v-uni-view",{staticClass:"use-empty h-full dflex-c dflex-flow-c",class:"round"==t.eStyle?"round border-radius bg-main":""},[t.imgurl?n("v-uni-image",{attrs:{src:t.imgurl}}):t._e(),t.tip?n("v-uni-view",{staticClass:"title padding-sm"},[t._v(t._s(t.tip))]):t._e(),n("v-uni-button",{staticClass:"no-border use-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.to.apply(void 0,arguments)}}},[t._v(t._s(t.btnTip))])],1)],1)},i=[]},c3b7:function(t,e,n){"use strict";n.r(e);var a=n("a3a3"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},c708:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={useEmpty:n("fdd1").default,useLoadmore:n("9d4a").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"state-area dflex navbar-area bg-main"},t._l(t.navList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"nav-item dflex-c pos-r fs h-full",class:{active:t.tabCurrentIndex===a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tabClick(a)}}},[t._v(t._s(e.state))])})),1),n("v-uni-swiper",{staticClass:"swiper-area w-full",attrs:{duration:0,current:t.tabCurrentIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab.apply(void 0,arguments)}}},t._l(t.navList,(function(e,a){return n("v-uni-swiper-item",{key:a,staticClass:"tab-content wh-full"},[n("v-uni-scroll-view",{staticClass:"h-full",attrs:{"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadData.apply(void 0,arguments)}}},[0===e.orderList.length&&e.loaded?n("use-empty",{attrs:{"e-style":"round","e-type":"cart",tip:"订单数据为空",height:"93vh"}}):t._e(),t._l(e.orderList,(function(e,a){return n("v-uni-view",{key:a,staticClass:"padding-lr margin-bottom-sm",class:0===a?"padding-top-sm":""},[n("v-uni-view",{staticClass:"order-item padding bg-main border-radius"},[n("v-uni-view",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.todetail(e.order)}}},[t._l(e.order_detail,(function(e,a){return n("v-uni-view",{key:a,staticClass:"goods-area",class:{"margin-top":a>0}},[n("v-uni-image",{attrs:{src:e.goods_img,mode:"aspectFill"}}),n("v-uni-view",{staticClass:"right flex1"},[n("v-uni-text",{staticClass:"clamp-2"},[t._v(t._s(e.goods_name)+"\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.goods_name_pw))]),n("v-uni-view",{staticClass:"ft-dark fs-xs padding-top-xs"},[n("v-uni-text",{staticClass:"margin-right"},[t._v("× "+t._s(e.goods_num))]),t._v(t._s(e.goods_sku_name||"  "))],1),n("v-uni-view",{staticClass:"margin-top-sm"},[n("v-uni-text",{staticClass:"price ft-main fs-sm"},[t._v(t._s(e.goods_price/100))])],1)],1)],1)})),n("v-uni-view",{staticClass:"dflex-e"},[n("v-uni-text",{staticClass:"fs-xs margin-right-xs"},[t._v("实付款")]),n("v-uni-text",{staticClass:"price ft-main"},[t._v(t._s(e.order.order_actural_paid/100))])],1)],2),n("v-uni-view",{staticClass:"dflex-b margin-top-sm"},[n("v-uni-view",["处理中"==e.order.order_refund_state?n("v-uni-text",{staticClass:"ft-dark"},[t._v("退款处理中")]):e.order.order_refund_state?n("v-uni-text",{staticClass:"ft-dark"},[t._v(t._s(e.order.order_refund_state))]):"待评价"==e.order.state?n("v-uni-text",{staticClass:"ft-dark"},[t._v("已发货")]):n("v-uni-text",{staticClass:"ft-dark"},[t._v(t._s(e.order.state))])],1),n("v-uni-view",{staticClass:"dflex-e"},["待付款"==e.order.state?n("v-uni-view",{staticClass:"dflex"},[n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cancelOrder(e)}}},[t._v("取消订单")]),"待付款"==e.order.order_pay_state?n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main main-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.payment(e.order)}}},[t._v("立即支付")]):t._e(),"待核实"==e.order.order_pay_state?n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main main-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.payment(e.order)}}},[t._v("待核实")]):t._e()],1):t._e(),"待发货"==e.order.state?n("v-uni-view",{staticClass:"dflex"},[e.order.order_refund_state?t._e():n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.torefund(e)}}},[t._v("申请退款")])],1):t._e(),!e.order.order_refund_state&&["待收货","待评价","已完成"].includes(e.order.state)?n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toexpress(e)}}},[t._v("查看物流")]):t._e(),"待收货"==e.order.state?n("v-uni-view",{staticClass:"dflex"},[e.order.order_refund_state?t._e():n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main main-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toreceipt(e)}}},[t._v("确认收货")])],1):t._e(),"待评价"==e.order.state?n("v-uni-view",{staticClass:"dflex"},[n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main main-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toevaluate(e)}}},[t._v("我要评价")])],1):t._e(),["已取消","已完成"].includes(e.order.state)?n("v-uni-view",{staticClass:"dflex"},[n("v-uni-button",{staticClass:"action-btn border-radius-big bg-main main-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.delOrder(e)}}},[t._v("删除订单")])],1):t._e()],1)],1)],1)],1)})),e.orderList.length>0&&e.loaded&&e.hasmore?n("use-loadmore",{attrs:{type:e.loadingType}}):t._e()],2)],1)})),1)],1)},r=[]},c904:function(t,e,n){"use strict";n.r(e);var a=n("9af8"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},d510:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"use-loadmore padding-tb-sm dflex-c"},["nomore"!==this.type?e("v-uni-view",{staticClass:"iconfont iconxiangqing animated rotate margin-right-sm ft-base"}):this._e(),e("v-uni-text",{staticClass:"ft-dark"},[this._v(this._s(this.tip||this.defaults[this.type]))])],1)},i=[]},e89f:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.use-empty-container .use-empty .round[data-v-66eeddfb]{padding:25% %?50?%}.use-empty-container .use-empty .round uni-button[data-v-66eeddfb]{width:%?220?%}.use-empty-container .use-empty uni-image[data-v-66eeddfb]{width:%?160?%;height:%?160?%}.use-empty-container .use-empty .title[data-v-66eeddfb]{color:silver}.use-empty-container .use-empty .use-btn[data-v-66eeddfb]{font-size:%?30?%;display:inline-block}',""]),t.exports=e},f1e7:function(t,e,n){"use strict";var a=n("5a2e"),i=n.n(a);i.a},fdd1:function(t,e,n){"use strict";n.r(e);var a=n("c276"),i=n("9a20");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("9338");var o=n("f0c5"),d=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"66eeddfb",null,!1,a["a"],void 0);e["default"]=d.exports}}]);