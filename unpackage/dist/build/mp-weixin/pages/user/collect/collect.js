(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/collect/collect"],{"0505":function(e,t,o){"use strict";o.r(t);var n=o("f086"),r=o("211d");for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("094a");var c=o("f0c5"),i=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=i.exports},"094a":function(e,t,o){"use strict";var n=o("7ab1"),r=o.n(n);r.a},"211d":function(e,t,o){"use strict";o.r(t);var n=o("f450"),r=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},"7ab1":function(e,t,o){},a9d2:function(e,t,o){"use strict";(function(e,t){var n=o("4ea4");o("cd95"),o("a9ff");n(o("66fd"));var r=n(o("0505"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(r.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},f086:function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var n={useEmpty:function(){return o.e("components/use-empty/use-empty").then(o.bind(null,"fdd1"))},useLoadmore:function(){return o.e("components/use-loadmore/use-loadmore").then(o.bind(null,"9d4a"))},useTotop:function(){return o.e("components/use-totop/use-totop").then(o.bind(null,"61fe"))}},r=function(){var e=this.$createElement;this._self._c},a=[]},f450:function(e,t,o){"use strict";(function(e,n){var r=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(o("9523")),c=o("26cb");function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var s=e.database(),u="usemall-member-collect",d={computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){(0,a.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},(0,c.mapState)(["islogin","member"])),data:function(){return{loadmoreType:"nomore",datas:[],empty:!1,hasmore:0,reqdata:{rows:20,page:1},scrollTop:0}},watch:{datas:function(e){var t=0===e.length;this.empty!==t&&(this.empty=t)}},onShareAppMessage:function(e){var t=0;this.member&&this.member._id&&(t=this.member._id);var o=this.datas.find((function(t){return t.goods_id==e.target.id})),n="";return o&&o.id>0&&(n=o.share_img),{imageUrl:n,bgImgUrl:n,title:"来自 [".concat(this.member.user_name,"] 的收藏夹"),path:"/pages/goods/goods?id=".concat(e.target.id,"&mid=").concat(t),content:"用云电商",desc:"用云电商",success:function(e){console.log(e),console.log("转发成功",JSON.stringify(e))},fail:function(e){console.log("转发失败",JSON.stringify(e))}}},onPageScroll:function(e){this.$refs.usetop.change(e.scrollTop)},onShow:function(){this.loadData()},methods:{loadData:function(){var e=this,t=s.collection("usemall-goods").getTemp();s.collection(u,t).where("create_uid == $env.uid && state == '已收藏'").field("_id, visit_cnt, goods.price as price,goods.name as name ,last_modify_time, goods._id as goods_id, goods.img as img, goods.state as goods_state").orderBy("last_modify_time desc").get().then((function(t){if(t&&t.result&&0===t.result.errCode){var o=[];t.result.data.forEach((function(e){o.push(e)})),e.datas=o,0===e.datas.length&&(e.empty=!0)}}))},deleteCollect:function(e){var t=this;n.showModal({title:"提示",content:"删除收藏",success:function(o){o.confirm?t.$db[u].where("create_uid == $env.uid").remove(e).then((function(e){200===e.code&&t.loadData()})):o.cancel&&console.log("用户点击取消")}})},clear:function(){var e=this;n.showModal({title:"提示",content:"清空收藏",success:function(t){t.confirm?e.$db[u].where("create_uid == $env.uid").remove().then((function(t){200!==t.code?e.$api.msg(t.msg):e.datas=[]})):t.cancel&&console.log("用户点击取消")}})},togoods:function(e){this.$api.togoods({id:e.goods_id})}}};t.default=d}).call(this,o("a9ff")["default"],o("543d")["default"])}},[["a9d2","common/runtime","common/vendor"]]]);