<view class="{{['container','bg-drak',(!empty)?'margin-bottom-big':'']}}"><block wx:if="{{!islogin}}"><use-empty vue-id="4b7a7c3e-1" e-style="round" e-type="unauthorized" tip="当前未授权" btn-tip="去登录" height="70vh" auto="{{false}}" data-event-opts="{{[['^goto',[['tologin']]]]}}" bind:goto="__e" bind:__l="__l"></use-empty></block><block wx:else><block wx:if="{{empty}}"><use-empty vue-id="4b7a7c3e-2" e-style="round" e-type="cart" tip="购物车数据为空" height="70vh" bind:__l="__l"></use-empty></block><block wx:else><view><view class="cart-list padding-sm"><block wx:for="{{cartDatas}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block><view class="cart-item bg-main margin-bottom-sm padding-lg pos-r dflex-s border-radius"><view data-event-opts="{{[['tap',[['togoods',['$0'],[[['cartDatas','',index]]]]]]]}}" class="image-wrapper pos-r" bindtap="__e"><image class="border-radius-xs wh-full" mode="aspectFill" lazy-load="{{true}}" src="{{item.goods.img}}"></image><block wx:if="{{item.goods.stock_num>0&&item.goods.stock_num>=item.goods_num}}"><view data-event-opts="{{[['tap',[['check',['item',index]]]]]}}" class="{{['iconfont','checkbox','pos-a','bg-main','border-radius-big',(item.checked)?'active':'',(item.checked)?'iconxuanzhongzhuangtai':'',(!item.checked)?'iconweixuanzhongzhuangtai':'']}}" catchtap="__e"></view></block><block wx:if="{{item.goods.stock_num<10||item.goods.stock_num<item.goods_num}}"><view class="disabled dflex-c dflex-flow-c pos-a pos-tl-c border-radius-c"><text>库存不足</text><block wx:if="{{item.stock_num>0}}"><text class="margin-left-xs fs-xs">{{"剩余\n\t\t\t\t\t\t\t\t"+item.goods.stock_num}}</text></block></view></block></view><view class="item-right padding-left pos-r"><view data-event-opts="{{[['tap',[['togoods',['$0'],[[['cartDatas','',index]]]]]]]}}" class="clamp-2 title" bindtap="__e">{{item.goods.name+"\n\t\t\t\t\t\t\t"+item.goods.name_pw+''}}</view><view class="ft-dark fs-xs padding-top-xs">{{item.goods_sku.spec||'  '}}</view><view class="padding-tb-sm"><text class="price">{{item.goods.price/100}}</text><block wx:if="{{item.goods.market_price>0}}"><text class="m-price">{{item.goods.market_price/100}}</text></block></view><use-number-box vue-id="{{'4b7a7c3e-3-'+index}}" min="{{1}}" max="{{item.goods.stock_num||1}}" value="{{item.goods_num}}" is-max="{{item.goods_num>=item.goods.stock_num}}" is-min="{{item.goods_num===1}}" index="{{index}}" disabled="{{item.goods_num>=item.goods.stock_num}}" data-event-opts="{{[['^eventChange',[['numberChange']]]]}}" bind:eventChange="__e" bind:__l="__l"></use-number-box></view><view data-event-opts="{{[['tap',[['deleteCart',['$0'],[[['cartDatas','',index,'_id']]]]]]]}}" class="del-btn iconfont iconlajitong-01 pos-a border-radius-c dflex-c ft-dark fs-xl" catchtap="__e"></view></view></block></block></view><view class="action-section dflex w-full bg-main pos-f padding-right"><view class="checkbox pos-r h-full dflex-c"><view data-event-opts="{{[['tap',[['check',['all']]]]]}}" class="{{['padding-lr','iconfont',(allChecked)?'active':'',(allChecked)?'iconxuanzhongzhuangtai':'',(!allChecked)?'iconweixuanzhongzhuangtai':'']}}" bindtap="__e"></view><view data-event-opts="{{[['tap',[['clearCart',['$event']]]]]}}" class="{{['clear-btn','pos-a','tac','ft-white',(allChecked)?'show':'']}}" bindtap="__e">清空</view></view><view class="total-box flex1 tar padding-right-lg"><text class="price">{{total||0}}</text></view><button class="payment no-border border-radius-lg fs" type="primary" data-event-opts="{{[['tap',[['createOrder',['$event']]]]]}}" bindtap="__e">去结算</button></view></view></block></block><use-hot-goods vue-id="4b7a7c3e-4" title-type="round" title="热门推荐" bind:__l="__l"></use-hot-goods></view>