(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/category"],{"0e3c":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return a}));var a={useHeader:function(){return o.e("components/use-header/use-header").then(o.bind(null,"3441"))},useEmpty:function(){return o.e("components/use-empty/use-empty").then(o.bind(null,"fdd1"))},useLoadmore:function(){return o.e("components/use-loadmore/use-loadmore").then(o.bind(null,"9d4a"))},useTotop:function(){return o.e("components/use-totop/use-totop").then(o.bind(null,"61fe"))}},n=function(){var t=this.$createElement;this._self._c},s=[]},"1cd2":function(t,e,o){"use strict";(function(t,e){var a=o("4ea4");o("cd95"),o("a9ff");a(o("66fd"));var n=a(o("2601"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},2601:function(t,e,o){"use strict";o.r(e);var a=o("0e3c"),n=o("4a2c");for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("2cc2");var d=o("f0c5"),i=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=i.exports},"2cc2":function(t,e,o){"use strict";var a=o("b133"),n=o.n(a);n.a},"4a2c":function(t,e,o){"use strict";o.r(e);var a=o("676d"),n=o.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"676d":function(t,e,o){"use strict";(function(t){var a=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(o("2eee")),s=a(o("c973")),d={data:function(){return{mode:2,scrollHeight:"100%",headerPlaceholder:0,headerFixed:!0,searchAuto:!0,searchTip:"请输入搜索关键字",cid:0,fdatas:[],sdatas:[],goodsDatas:[],empty:!1,hasmore:0,loadmoreType:"nomore",reqdata:{rows:20,page:1},top:0,scrollTop:0,navHeight:0}},watch:{goodsDatas:function(t){var e=0===t.length;this.empty!==e&&(this.empty=e)}},onPageScroll:function(t){this.$refs.usetop.change(t.scrollTop)},onLoad:function(){var e=this;this.mode=t.getStorageSync("category.mode")||1,this.loadData((function(){2==e.mode&&e.loadGoodsDatas()}))},onPullDownRefresh:function(){this.loadData((function(){t.stopPullDownRefresh()}))},methods:{loadData:function(t){var e=this;return(0,s.default)(n.default.mark((function o(){return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.$db["usemall-goods-category"].where({state:"启用"}).tolist().then((function(o){200===o.code&&(e.fdatas=[],e.sdatas=[],o.datas.forEach((function(t){t.pid?e.sdatas.push(t):e.fdatas.push(t)})),e.fdatas.length>0&&(e.cid=e.fdatas[0]._id),"function"===typeof t&&t())}));case 1:case"end":return o.stop()}}),o)})))()},loadGoodsDatas:function(){var t=this;2==this.mode&&(this.reqdata.cid=this.cid,this.$db["usemall-goods"].where('state == "销售中"').where("'".concat(this.reqdata.cid,"' in cids")).tolist(this.reqdata).then((function(e){200===e.code&&(t.goodsDatas=e.datas,t.goodsDatas.length>=t.reqdata.rows&&1==t.reqdata.page&&(t.hasmore=!0),t.empty=0===t.goodsDatas.length)})))},totop:function(t){this.top=t.scrollTop,this.$nextTick((function(){this.top=0}))},fSelect:function(t){this.cid=t._id,this.loadGoodsDatas()},changeMode:function(){this.mode=1==this.mode?2:1,t.setStorage({key:"category.mode",data:this.mode}),this.loadGoodsDatas()},togoods:function(t){this.$api.togoods({id:t._id})},togoodslist:function(t){this.$api.togoodslist({cid:t._id})}},mounted:function(){}};e.default=d}).call(this,o("543d")["default"])},b133:function(t,e,o){}},[["1cd2","common/runtime","common/vendor"]]]);