(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/user"],{"082f":function(t,e,o){"use strict";o.r(e);var i=o("9614"),n=o("6470");for(var a in n)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(a);o("0a8b");var s=o("f0c5"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=r.exports},"0a8b":function(t,e,o){"use strict";var i=o("6d41"),n=o.n(i);n.a},"60e3":function(t,e,o){"use strict";(function(t,i){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(o("9523")),s=o("26cb");function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){(0,a.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var u=t.database(),l={computed:c({},(0,s.mapState)(["islogin","member"])),data:function(){return{isreq:!1,historyDatas:{},stats:{},actionSheetShow:!1,actionSheetList:[],actionSheetTips:{text:"",color:"#9a9a9a",size:24},is_mp:!1,is_alipay:!1}},onLoad:function(){var t=this;this.$nextTick((function(){t.is_mp=t.$env.is_mp,t.is_alipay="alipay"==t.$env.platform}))},onShow:function(){this.islogin?this.loadData():this.$api.msg("账号未登录")},methods:c(c({},(0,s.mapMutations)(["logout","putMember"])),{},{loadData:function(){var t=this;this.$func.usemall.call("member/data").then((function(e){200==e.code&&(t.putMember(e.datas.member),console.log("member/data",e),t.stats=e.datas.stats,t.stats.order_state={},t.stats.order.forEach((function(e){t.stats.order_state[e._id]=e.num})))}));var e=u.collection("usemall-goods").getTemp();u.collection("usemall-goods-history",e).where("create_uid == $env.uid").field("visit_cnt, last_modify_time, goods._id as goods_id, goods.img as goods_img, goods.state as goods_state").orderBy("last_modify_time desc").get().then((function(e){if(e&&e.result&&0===e.result.errCode){var o=[];e.result.data.forEach((function(t){t._id=t.goods_id[0],t.img=t.goods_img[0],t.state=t.goods_state[0],o.push(t)})),t.historyDatas=o}}))},openActionSheet:function(){var t=this;this.actionSheetShow=!0,this.$api.timerout((function(){t.actionSheetList=[{text:"退出登录",color:"#333"},{text:"切换账号",color:"#333"}]}),0)},actionSheetClose:function(){console.log(this.actionSheetShow)},actionSheetClick:function(t){var e=this;switch(t){case 0:this.$api.msg("退出成功"),this.logout(),this.$api.timerout((function(){e.$api.tohome()}),200);break;case 1:this.$api.tologin();break}},to:function(t){this.islogin?i.navigateTo({url:t}):this.$api.tologin()},toOrder:function(t,e){this.islogin?i.setStorage({key:"__order_state",data:e,success:function(t){console.log(t)},complete:function(){i.navigateTo({url:t})}}):this.$api.tologin()},togoods:function(t){this.$api.togoods({id:t._id})}})};e.default=l}).call(this,o("a9ff")["default"],o("543d")["default"])},6470:function(t,e,o){"use strict";o.r(e);var i=o("60e3"),n=o.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(a);e["default"]=n.a},"6d41":function(t,e,o){},"8a47":function(t,e,o){"use strict";(function(t,e){var i=o("4ea4");o("cd95"),o("a9ff");i(o("66fd"));var n=i(o("082f"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},9614:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return i}));var i={useListTitle:function(){return o.e("components/use-list-title/use-list-title").then(o.bind(null,"0568"))},useActionSheet:function(){return o.e("components/use-action-sheet/use-action-sheet").then(o.bind(null,"af15"))},useCopyright:function(){return o.e("components/use-copyright/use-copyright").then(o.bind(null,"59ed"))}},n=function(){var t=this.$createElement;this._self._c},a=[]}},[["8a47","common/runtime","common/vendor"]]]);