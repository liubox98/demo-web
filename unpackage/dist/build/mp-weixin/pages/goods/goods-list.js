(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods-list"],{"06ed":function(e,t,o){"use strict";(function(e){var a=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(o("2eee")),r=a(o("448a")),s=a(o("c973")),i={data:function(){return{empty:!1,headerPosition:"fixed",filterIndex:0,priceOrder:0,goodsDatas:[],loadmoreType:"more",reqdata:{page:1,rows:8,sidx:"sort",sord:"asc"},scrollTop:0}},watch:{goodsDatas:function(e){var t=0===e.length;this.empty!==t&&(this.empty=t)}},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute",this.$refs.usetop.change(e.scrollTop)},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.loadData()},onLoad:function(t){var o="搜索列表";for(var a in t&&t.hot?o="热门推荐":t&&t.limited&&(o="限时精选"),e.setNavigationBarTitle({title:o}),t)this.reqdata[a]=decodeURIComponent(t[a]);this.loadData()},methods:{loadData:function(){var t=arguments,o=this;return(0,s.default)(n.default.mark((function a(){var s,i;return n.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.length>0&&void 0!==t[0]?t[0]:"add",i=t.length>1?t[1]:void 0,"loading"!==o.loadmoreType){a.next=4;break}return a.abrupt("return");case 4:if(1!=i&&"refresh"!=s||(o.reqdata.page=1),"add"!==s){a.next=11;break}if("nomore"!==o.loadmoreType){a.next=8;break}return a.abrupt("return");case 8:o.loadmoreType="loading",a.next=12;break;case 11:o.loadmoreType="more";case 12:o.$func.usemall.call("goods/list",o.reqdata).then((function(t){if(200===t.code)if(t.datas&&t.datas.goods.length>0){1!=i&&"refresh"!=s||(o.goodsDatas=[]);var a=[];t.datas.goods.forEach((function(e){"销售中"===e.state&&a.push(e)})),o.goodsDatas=[].concat((0,r.default)(o.goodsDatas),a),t.datas.goods.length>=o.reqdata.rows?(o.reqdata.page++,o.loadmoreType="more"):o.loadmoreType="nomore"}else o.loadmoreType="nomore";0===o.goodsDatas.length&&(o.empty=!0),1==i?e.hideLoading():"refresh"==s&&e.stopPullDownRefresh()}));case 13:case"end":return a.stop()}}),a)})))()},navbarClick:function(t){this.filterIndex===t&&2!==t||(this.filterIndex=t,this.priceOrder=2===t?1===this.priceOrder?2:1:0,0==this.filterIndex?(this.reqdata.sidx="sort",this.reqdata.sord="asc"):1==this.filterIndex?(this.reqdata.sidx="sale_cnt",this.reqdata.sord="desc"):2==this.filterIndex&&(this.reqdata.sidx="price",1==this.priceOrder?this.reqdata.sord="desc":2==this.priceOrder&&(this.reqdata.sord="asc")),e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"}))},tosearch:function(){this.$api.pages().length>1?e.navigateBack():this.$api.tosearch()},togoods:function(e){this.$api.togoods({id:e._id})}}};t.default=i}).call(this,o("543d")["default"])},"3cfc":function(e,t,o){"use strict";o.r(t);var a=o("06ed"),n=o.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(r);t["default"]=n.a},"4f94":function(e,t,o){},"73e9":function(e,t,o){"use strict";var a=o("4f94"),n=o.n(a);n.a},"7ad9":function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return r})),o.d(t,"a",(function(){return a}));var a={useEmpty:function(){return o.e("components/use-empty/use-empty").then(o.bind(null,"fdd1"))},useLoadmore:function(){return o.e("components/use-loadmore/use-loadmore").then(o.bind(null,"9d4a"))},useTotop:function(){return o.e("components/use-totop/use-totop").then(o.bind(null,"61fe"))},useHotGoods:function(){return o.e("components/use-hot-goods/use-hot-goods").then(o.bind(null,"e3bf"))}},n=function(){var e=this.$createElement;this._self._c},r=[]},b498:function(e,t,o){"use strict";o.r(t);var a=o("7ad9"),n=o("3cfc");for(var r in n)["default"].indexOf(r)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(r);o("73e9");var s=o("f0c5"),i=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=i.exports},ee9e:function(e,t,o){"use strict";(function(e,t){var a=o("4ea4");o("cd95"),o("a9ff");a(o("66fd"));var n=a(o("b498"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(n.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])}},[["ee9e","common/runtime","common/vendor"]]]);