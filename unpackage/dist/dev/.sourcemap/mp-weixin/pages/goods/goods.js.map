{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/goods/goods.vue?5aed","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/goods/goods.vue?2038","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/goods/goods.vue?1811","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/goods/goods.vue?8ff0","uni-app:///pages/goods/goods.vue","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/goods/goods.vue?cdd5","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/goods/goods.vue?dc43"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","lPainter","computed","data","id","mid","goods","swiperDatas","sku","skuDatas","shareShow","posterQRcode","posterUrl","posterShow","posterData","couponShow","couponDatas","tagShow","tagDatas","evaluateDatas","evaluateTitle","html_nodes","favorite","scrollTop","watch","onShareAppMessage","title","path","success","console","fail","onPageScroll","onLoad","onShow","methods","loadData","call","goods_id","share_mid","then","__goods_skus","__skuDatas","name","price","market_price","num","selected","__tagDatas","resolveQueryq","split","slice","preview","uni","urls","current","longPressActions","itemList","shareOpen","createPoster","posterQRcodeResult","posterSuccess","posterSave","filePath","icon","duration","selectSKU","toevaluate","url","tohome","tofavorite","state","tocart","goods_num","goods_sku","tobuy","loginCheck","_this"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/FA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACyPnnB;AAEA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAEA;EACAC;IAAAC;EAAA;EACAC,4BACA,2CACA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MAEAC;IACA;EACA;EACAC;IACAhB;MACA;MACA;MACA;IACA;EACA;EACAiB;IACA;IACA;IACA;MACApB;IACA;IAEA;MACAqB;MACAC;MAAA;MACAC;QACA;QACAC;MACA;MACAC;QACA;QACAD;MACA;IACA;EACA;EACAE;IACA;IACA;EACA;EACAC;IACAH;IAEA;MACA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEA;MACA;MACA;IACA;EACA;EACAI;IACA;MACA;MACA;IACA;IAEA;EACA;EAEAC;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAEA,qBACAC;kBACAC;kBACAC;gBACA,GACAC;kBACA;oBACA;oBACA;oBACA;oBAEA;sBACA;wBAAA;sBAAA;oBACA;sBACA;oBACA;oBACA;oBACA;oBACA;oBAEA;;oBAYA;oBACA;oBACA;sBACA;sBACAC;wBACA;wBACAC;0BACArC;0BACAI;0BACAkC;0BACAC;0BACAC;0BACAC;0BACAC;wBACA;sBACA;sBACA;oBACA;;oBAEA;oBACA;sBACA;oBACA;;oBAEA;oBACA;sBACA;wBAAA;sBAAA;oBACA;oBAEA;oBAEA;sBACAC;wBACAL;wBACAI;sBACA;oBACA;oBAEA;;oBAEA;oBACA;oBACA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAE;MACA,gBACAC,WACAC,aACAD;MACA;MACA;IACA;IACA;IACAE;MACA;MAEAC;QACAC;QACAC;QACAC;UACAC;UACA5B;YACAC;UACA;UACAC;YACAD;UACA;QACA;MACA;IACA;IAEA;IACA4B;MACA;MAEA;IACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACAN;QACA1B;MACA;;MAGA;MACA;IAOA;IACA;IACAiC;MACA;MACA;MACA;;MAEA;IACA;IACA;IACAC;MACA;MAEAR;IACA;IACA;IACAS;MACA;QACAT;UACA1B;QACA;QAEA0B;UACAU;UACAlC;YACAwB;YAEAA;cACA1B;cACAqC;cACAC;YACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;MAEA;IACA;IAEA;IACAC;MACAd;QACAe;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;MAEA;MACA;QACAhC;QACAiC;MACA;MACA;QACA;UACA;UACA;QACA;QAEA;MACA;IACA;IACA;IACAC;MAAA;MACA;MAEA,mBACAnC;QACAC;QACAmC;QACAC;MACA,GACAlC;QACA;UACA;UACA;QACA;QAEA;MACA;IACA;IACA;IACAmC;MACA;MACA;MAEAtB;QACAe;MACA;IACA;IACA;IACAQ;MACA;QACA;QACAvB;UACA1B;UACAE;YACA;cACAgD;YACA;UACA;QACA;QACA;MACA;MAEA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACrmBA;AAAA;AAAA;AAAA;AAA0oC,CAAgB,gnCAAG,EAAC,C;;;;;;;;;;;ACA9pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/goods/goods.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/goods/goods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods.vue?vue&type=template&id=5566b618&\"\nvar renderjs\nimport script from \"./goods.vue?vue&type=script&lang=js&\"\nexport * from \"./goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/goods/goods.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=template&id=5566b618&\"","var components\ntry {\n  components = {\n    usePopup: function () {\n      return import(\n        /* webpackChunkName: \"components/use-popup/use-popup\" */ \"@/components/use-popup/use-popup.vue\"\n      )\n    },\n    useQrcode: function () {\n      return import(\n        /* webpackChunkName: \"components/use-qrcode/use-qrcode\" */ \"@/components/use-qrcode/use-qrcode.vue\"\n      )\n    },\n    useListTitle: function () {\n      return import(\n        /* webpackChunkName: \"components/use-list-title/use-list-title\" */ \"@/components/use-list-title/use-list-title.vue\"\n      )\n    },\n    useRate: function () {\n      return import(\n        /* webpackChunkName: \"components/use-rate/use-rate\" */ \"@/components/use-rate/use-rate.vue\"\n      )\n    },\n    useTotop: function () {\n      return import(\n        /* webpackChunkName: \"components/use-totop/use-totop\" */ \"@/components/use-totop/use-totop.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.skuDatas.length\n  var g1 = _vm.skuDatas.length\n  var l0 = _vm.__map(_vm.couponDatas, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g2 = item.end_time.split(\" \")\n    return {\n      $orig: $orig,\n      g2: g2,\n    }\n  })\n  var g3 = _vm.evaluateDatas.length\n  var l1 =\n    g3 > 0\n      ? _vm.__map(_vm.evaluateDatas, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g4 = _vm.$api.format(item.create_time, \"yyyy-MM-dd\")\n          return {\n            $orig: $orig,\n            g4: g4,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.couponShow = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.tagShow = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        l0: l0,\n        g3: g3,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- 01. 轮播区 -->\r\n\t\t<view class=\"swiper-area w-full pos-f\">\r\n\t\t\t<swiper class=\"h-full pos-r\" indicator-dots circular=\"true\" duration=\"400\">\r\n\t\t\t\t<swiper-item v-for=\"(item, index) in swiperDatas\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"wh-full\"><image :src=\"item.url\" class=\"wh-full loaded\" lazy-load=\"true\" mode=\"aspectFill\"></image></view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\r\n\t\t<!-- 02. 商品数据区 -->\r\n\t\t<view class=\"goods-area bg-main padding\">\r\n\t\t\t<view class=\"price-box dflex-b\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text class=\"price fwb fs-big\">{{ goods.price / 100 || '' }}</text>\r\n\t\t\t\t\t<text class=\"m-price\" v-if=\"goods.market_price > 0\">{{ goods.market_price / 100 || '' }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"dflex fs-sm ft-dark\">\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN || H5 -->\r\n\t\t\t\t\t<view class=\"margin-right-sm dflex\" @click=\"shareOpen\">\r\n\t\t\t\t\t\t<view class=\"iconfont iconfenxiang padding-right-xs\"></view>\r\n\t\t\t\t\t\t<text>分享</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef MP-ALIPAY || MP-BAIDU || MP-QQ || MP-TOUTIAO -->\r\n\t\t\t\t\t<button class=\"btn no-border padding-0 fs-sm ft-dark\" open-type=\"share\">\r\n\t\t\t\t\t\t<view class=\"margin-right-sm dflex\">\r\n\t\t\t\t\t\t\t<view class=\"iconfont iconfenxiang padding-right-xs\"></view>\r\n\t\t\t\t\t\t\t<text>分享</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view class=\"margin-right-sm dflex\">\r\n\t\t\t\t\t\t<view class=\"padding-right-xs padding-right-xs\">已售</view>\r\n\t\t\t\t\t\t<text>{{ goods.sale_cnt || '0' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"dflex\">\r\n\t\t\t\t\t\t<view class=\"padding-right-xs padding-right-xs\">库存</view>\r\n\t\t\t\t\t\t<text>{{ goods.stock_num || '0' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"title fs\">{{ goods.name || '' }} {{ goods.name_pw || '' }}</text>\r\n\t\t</view>\r\n\t\t<view class=\"gap\"></view>\r\n\t\t<!-- 分享 -->\r\n\t\t<use-popup mode=\"bottom\" bgclass=\" \" v-model=\"shareShow\">\r\n\t\t\t<view class=\"share-area margin border-radius bg-main\">\r\n\t\t\t\t<view class=\"tac w-full padding-sm\">分享</view>\r\n\t\t\t\t<view class=\"padding-lr margin-bottom-xl dflex-b pos-r\">\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t<button class=\"dflex-c dflex-flow-c no-border btn\" style=\"color: #07c160\" open-type=\"share\">\r\n\t\t\t\t\t\t<view class=\"iconfont iconweixin padding-lr-sm border-radius-c fs-xxxl\"></view>\r\n\t\t\t\t\t\t<view class=\"dflex-c fs-sm ft-dark\">微信好友</view>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<view class=\"vertical-line\"></view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<button class=\"dflex-c dflex-flow-c no-border btn ft-base\" @click=\"createPoster\">\r\n\t\t\t\t\t\t<view class=\"iconfont iconhaibao1 padding-lr-sm border-radius-c fs-xxxl\"></view>\r\n\t\t\t\t\t\t<view class=\"dflex-c fs-sm ft-dark\">生成海报</view>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</use-popup>\r\n\r\n\t\t<!-- 海报二维码 -->\r\n\t\t<view class=\"qrcode tac padding-tb pos-f pos-tl-c\">\r\n\t\t\t<use-qrcode :onval=\"true\" :val=\"posterQRcode\" :show=\"false\" loading-text=\"生成海报中\" qrsize=\"200\" @result=\"posterQRcodeResult\"></use-qrcode>\r\n\t\t</view>\r\n\r\n\t\t<!-- 海报 -->\r\n\t\t<view v-if=\"posterShow && !posterUrl\" class=\"poster pos-f pos-tl-c padding\">\r\n\t\t\t<l-painter custom-style=\"position: fixed;z-index: -1;top: -200vh;left: -100vw;\" :board=\"posterData\" isRenderImage @success=\"posterSuccess\" />\r\n\t\t</view>\r\n\t\t<use-popup mode=\"bottom\" bgclass=\" \" v-model=\"posterShow\" @close=\"\">\r\n\t\t\t<view class=\"padding border-radius margin\">\r\n\t\t\t\t<view v-if=\"!posterUrl\" class=\"tac bg-main padding border-radius pos-a pos-l-c\" style=\"bottom: 45vh\">海报生成中，请稍等</view>\r\n\t\t\t\t<view class=\"w-full\" style=\"height: 70vh\"><image :src=\"posterUrl\" class=\"wh-full\" mode=\"aspectFit\"></image></view>\r\n\r\n\t\t\t\t<view class=\"padding w-full margin-top\">\r\n\t\t\t\t\t<view class=\"dflex-b border-radius-big\">\r\n\t\t\t\t\t\t<!-- #ifdef MP -->\r\n\t\t\t\t\t\t<view class=\"tac padding-tb-sm flex1 bg-base\" @click=\"posterSave\">保存到相册</view>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t<!-- #ifdef H5 || MP-360 -->\r\n\t\t\t\t\t\t<view class=\"tac padding-tb-sm flex1 bg-base\">长按图片保存到相册</view>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</use-popup>\r\n\r\n\t\t<!-- 03. 规格区 -->\r\n\t\t<view v-if=\"skuDatas.length > 0\" class=\"sku-area bg-main padding-lr padding-top padding-bottom-xs pos-r\">\r\n\t\t\t<view class=\"con dflex dflex-wrap-w\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"margin-right-sm margin-bottom-sm dflex bg-drak border-radius-lg padding-tb-16 padding-lr\"\r\n\t\t\t\t\t:class=\"{ active: item.selected }\"\r\n\t\t\t\t\tv-for=\"(item, index) in skuDatas\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t@click=\"selectSKU(item)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"fs-xs\">{{ item.name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-if=\"skuDatas.length > 0\" class=\"gap\"></view>\r\n\r\n\t\t<!-- 04.01 优惠券 -->\r\n\t\t<use-list-title title=\"优惠\" tip=\"领取优惠券\" color=\"#ff6a6c\" iconfont=\"iconyouhui\" @goto=\"couponShow = true\"></use-list-title>\r\n\t\t<!-- 04.01 优惠券弹出层 -->\r\n\t\t<use-popup mode=\"bottom\" v-model=\"couponShow\" @open=\"couponOpen\">\r\n\t\t\t<!-- 优惠券区 -->\r\n\t\t\t<scroll-view>\r\n\t\t\t\t<view class=\"coupon-area padding bg-drak\">\r\n\t\t\t\t\t<view class=\"coupon-item bg-main pos-r fs-xs\" v-for=\"(item, index) in couponDatas\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"content pos-r padding dflex-b\">\r\n\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t<view class=\"margin-bottom-xs fs\">{{ item.name }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"ft-dark\">有效期至 {{ item.end_time.split(' ')[0] }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"tar\">\r\n\t\t\t\t\t\t\t\t<view class=\"margin-bottom-xs price\">{{ item.price }}</view>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.order_amount > 0\" class=\"ft-dark\">满{{ item.order_amount }}可用</view>\r\n\t\t\t\t\t\t\t\t<view v-else class=\"ft-dark\">不限</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"circle l\"></view>\r\n\t\t\t\t\t\t\t<view class=\"circle r\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"dflex-b\">\r\n\t\t\t\t\t\t\t<text class=\"ft-dark padding-lr\">{{ item.type }}</text>\r\n\t\t\t\t\t\t\t<text class=\"ft-base padding-tb-sm padding-lr\" @click=\"couponReceive(item.id)\">立即领取</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</use-popup>\r\n\r\n\t\t<!-- 04.02 服务标签 -->\r\n\t\t<view class=\"bg-main padding-lr padding-top padding-bottom-xs pos-r\" @click=\"tagShow = true\">\r\n\t\t\t<view class=\"dflex dflex-wrap-w\">\r\n\t\t\t\t<view v-for=\"(item, index) in tagDatas\" :key=\"index\" class=\"margin-right-sm margin-bottom-sm dflex\">\r\n\t\t\t\t\t<view class=\"iconfont iconyiwancheng- fwb fs-xs ft-base margin-right-xs\"></view>\r\n\t\t\t\t\t<text class=\"fs-xs\">{{ item.name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"icon-detail pos-a\"><view class=\"iconfont iconxiangqing ft-dark fs-sm\"></view></view>\r\n\t\t</view>\r\n\t\t<view class=\"gap\"></view>\r\n\t\t<!-- 04.02 服务标签弹出层 -->\r\n\t\t<use-popup mode=\"bottom\" v-model=\"tagShow\">\r\n\t\t\t<view class=\"tac w-full padding-sm\">服务说明</view>\r\n\t\t\t<view class=\"padding-lr padding-bottom-sm\">\r\n\t\t\t\t<view v-for=\"(item, index) in tagDatas\" :key=\"index\" class=\"margin-right-sm margin-bottom-sm dflex dflex-s\">\r\n\t\t\t\t\t<view class=\"iconfont iconyiwancheng- fwb fs ft-base margin-right-xs\"></view>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<view class=\"fs-sm\">{{ item.name }}</view>\r\n\t\t\t\t\t\t<view class=\"fs-xs\">服务标签对应的描述</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</use-popup>\r\n\r\n\t\t<!-- 05. 评价区 -->\r\n\t\t<view class=\"evaluate-area\" v-if=\"evaluateDatas.length > 0\">\r\n\t\t\t<use-list-title :title=\"evaluateTitle\" tip=\"好评率 100%\" color=\"#ff6a6c\" iconfont=\" \" @goto=\"toevaluate\"></use-list-title>\r\n\t\t\t<view class=\"padding-lr bg-main\">\r\n\t\t\t\t<view class=\"eva-box dflex-s padding-bottom-lg\" v-for=\"(item, index) in evaluateDatas\" :key=\"index\">\r\n\t\t\t\t\t<image class=\"portrait border-radius-c\" :src=\"item.member_headimg\"></image>\r\n\t\t\t\t\t<view class=\"right-area flex1 padding-left-sm\">\r\n\t\t\t\t\t\t<view class=\"dflex-b ft-dark\">\r\n\t\t\t\t\t\t\t<view class=\"dflex\">\r\n\t\t\t\t\t\t\t\t<text class=\"name margin-right\">{{ item.member_name }}</text>\r\n\t\t\t\t\t\t\t\t<use-rate :value=\"item.review_cnt\" disabled></use-rate>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"time fs-xs\">{{ $api.format(item.create_time, 'yyyy-MM-dd') }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"fs-sm ft-main padding-top-xs padding-bottom-sm\">{{ item.review_content }}</view>\r\n\t\t\t\t\t\t<view class=\"dflex dflex-wrap-w\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\tclass=\"\"\r\n\t\t\t\t\t\t\t\tmode=\"widthFix\"\r\n\t\t\t\t\t\t\t\tv-for=\"(img, i) in item.review_imgs\"\r\n\t\t\t\t\t\t\t\t:lazy-load=\"true\"\r\n\t\t\t\t\t\t\t\t:key=\"i\"\r\n\t\t\t\t\t\t\t\t:src=\"img\"\r\n\t\t\t\t\t\t\t\t@click=\"preview(item.review_imgs, img)\"\r\n\t\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t<text class=\"fs-xs ft-dark\">{{ item.goods_type || '套餐1' }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"gap\"></view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 06. 详情区 -->\r\n\t\t<view class=\"detail-area bg-main\">\r\n\t\t\t<view class=\"d-header padding dflex-c\"><text>图文详情</text></view>\r\n\t\t\t<rich-text class=\"pro-detail\" :nodes=\"html_nodes\"></rich-text>\r\n\t\t</view>\r\n\r\n\t\t<!-- 07. 操作区 -->\r\n\t\t<view class=\"oper-area pos-f dflex-b w-full padding-lr-sm\">\r\n\t\t\t<view class=\"btn-area dflex dflex-flow-c\" @click=\"tohome\">\r\n\t\t\t\t<text class=\"iconfont iconshouye-1\"></text>\r\n\t\t\t\t<text>首页</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- #ifndef MP-ALIPAY || H5 || MP-360 -->\r\n\t\t\t<button class=\"btn no-border dflex\" open-type=\"contact\">\r\n\t\t\t\t<view class=\"btn-area dflex-c dflex-flow-c\">\r\n\t\t\t\t\t<text class=\"iconfont iconkefu-01\"></text>\r\n\t\t\t\t\t<text>客服</text>\r\n\t\t\t\t</view>\r\n\t\t\t</button>\r\n\t\t\t<!-- #endif -->\r\n\r\n\t\t\t<view class=\"btn-area dflex dflex-flow-c\" :class=\"{ active: favorite }\" @click=\"tofavorite\">\r\n\t\t\t\t<text class=\"iconfont\" :class=\"favorite ? 'iconshoucang-' : 'iconshoucang-01'\"></text>\r\n\t\t\t\t<text>收藏</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex1 btn-container dflex-b border-radius-big\">\r\n\t\t\t\t<view class=\"tac padding-tb-sm flex1 bg-warn\" v-if=\"goods.stock_num > 0\" @click=\"tocart(goods)\">加入购物车</view>\r\n\t\t\t\t<view class=\"tac padding-tb-sm flex1 bg-base\" v-if=\"goods.stock_num > 0\" @click=\"tobuy(goods)\">立即购买</view>\r\n\t\t\t\t<view class=\"tac padding-tb-sm flex1 bg-disabled\" v-else>已售磐</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- #ifdef MP-ALIPAY -->\r\n\t\t<view class=\"fixed-top dflex-c dflex-flow-c\"><contact-button tnt-inst-id=\"0Xu_1aaW\" scene=\"SCE00225456\" size=\"50\" color=\"#bbb\" /></view>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<!-- 置顶 -->\r\n\t\t<use-totop ref=\"usetop\" bottom=\"120\"></use-totop>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n// #ifdef MP-ALIPAY\r\nimport aliParse from 'mini-html-parser2';\r\n// #endif\r\n\r\nimport lPainter from '@/uni_modules/lime-painter/components/lime-painter/';\r\nimport uposter from '@/common/poster.js';\r\n\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n\tcomponents: { lPainter },\r\n\tcomputed: {\r\n\t\t...mapState(['islogin', 'member'])\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 商品ID\r\n\t\t\tid: 0,\r\n\t\t\t// 分享ID\r\n\t\t\tmid: 0,\r\n\t\t\t// 商品数据\r\n\t\t\tgoods: {},\r\n\t\t\t// 轮播图\r\n\t\t\tswiperDatas: [],\r\n\t\t\t// SKU\r\n\t\t\tsku: {},\r\n\t\t\tskuDatas: [],\r\n\t\t\t// 分享\r\n\t\t\tshareShow: false,\r\n\t\t\t// 海报\r\n\t\t\tposterQRcode: '',\r\n\t\t\tposterUrl: '',\r\n\t\t\tposterShow: false,\r\n\t\t\tposterData: {},\r\n\r\n\t\t\t//优惠券\r\n\t\t\tcouponShow: false,\r\n\t\t\tcouponDatas: [],\r\n\t\t\t// 服务标签\r\n\t\t\ttagShow: false,\r\n\t\t\ttagDatas: [],\r\n\t\t\t// 商品评价\r\n\t\t\tevaluateDatas: [],\r\n\t\t\tevaluateTitle: '评价',\r\n\t\t\t// 商品详情\r\n\t\t\thtml_nodes: '',\r\n\t\t\t// 收藏\r\n\t\t\tfavorite: false,\r\n\r\n\t\t\tscrollTop: 0\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tsku(e) {\r\n\t\t\tthis.goods.price = e.price;\r\n\t\t\tthis.goods.market_price = e.market_price;\r\n\t\t\tthis.goods.stock_num = e.num;\r\n\t\t}\r\n\t},\r\n\tonShareAppMessage: function(ops) {\r\n\t\tlet _this = this;\r\n\t\tlet mid = 0;\r\n\t\tif (_this.member && _this.member._id) {\r\n\t\t\tmid = _this.member._id;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttitle: _this.goods.share_title,\r\n\t\t\tpath: `/pages/goods/goods?id=${this.id}&mid=${mid}`, //这里设定都是以\"/page\"开头,并拼接好传递的参数\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\t// 转发成功\r\n\t\t\t\tconsole.log('转发成功', res);\r\n\t\t\t},\r\n\t\t\tfail: function(res) {\r\n\t\t\t\t// 转发失败\r\n\t\t\t\tconsole.log('转发失败', res);\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonPageScroll(e) {\r\n\t\t//this.scrollTop = e.scrollTop;\r\n\t\tthis.$refs.usetop.change(e.scrollTop);\r\n\t},\r\n\tonLoad(options) {\r\n\t\tconsole.log('onload opts', options);\r\n\r\n\t\tif (options) {\r\n\t\t\tthis.mid = options.mid || '';\r\n\t\t\tif (options.id) {\r\n\t\t\t\tthis.id = options.id;\r\n\t\t\t} else if (options.q) {\r\n\t\t\t\tlet query = decodeURIComponent(options.q) || decodeURIComponent(uni.getStorageInfoSync('__scene_query_q'));\r\n\t\t\t\tthis.resolveQueryq(query);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.id) {\r\n\t\t\tthis.$api.msg('商品ID无效');\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\tonShow(options) {\r\n\t\tif (!this.id) {\r\n\t\t\tconst query = decodeURIComponent(uni.getStorageInfoSync('__scene_query_q'));\r\n\t\t\tthis.resolveQueryq(query);\r\n\t\t}\r\n\t\t\r\n\t\tthis.loadData();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync loadData() {\r\n\t\t\t\r\n\t\t\tawait this.$func.usemall\r\n\t\t\t\t.call('goods/detail', {\r\n\t\t\t\t\tgoods_id: this.id,\r\n\t\t\t\t\tshare_mid: this.mid\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t// 商品评价\r\n\t\t\t\t\t\tthis.evaluateDatas = res.datas.evaluate;\r\n\t\t\t\t\t\tif (res.datas.evaluate_cnt) this.evaluateTitle = `评价(${res.datas.evaluate_cnt})`;\r\n\r\n\t\t\t\t\t\tif (typeof res.datas.goods.imgs === 'string') {\r\n\t\t\t\t\t\t\tthis.swiperDatas = res.datas.goods.imgs.split(',').filter(x => x);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.swiperDatas = res.datas.goods.imgs;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.goods = res.datas.goods;\r\n\t\t\t\t\t\t// 商品详情\r\n\t\t\t\t\t\tlet __goods_detail = res.datas.goods_detail;\r\n\t\t\t\t\t\t// #ifndef MP-ALIPAY\r\n\t\t\t\t\t\tthis.html_nodes = __goods_detail.desc_mobile;\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\t\t\tthis.html_nodes = [];\r\n\t\t\t\t\t\taliParse(__goods_detail.desc_mobile.replace(/\"><*/gi, '\"/><'), (err, nodes) => {\r\n\t\t\t\t\t\t\tif (!err) {\r\n\t\t\t\t\t\t\t\tthis.html_nodes = nodes;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// 商品SKU\r\n\t\t\t\t\t\tlet __goods_skus = res.datas.goods_skus;\r\n\t\t\t\t\t\tif (__goods_skus.length > 0) {\r\n\t\t\t\t\t\t\tlet __skuDatas = [];\r\n\t\t\t\t\t\t\t__goods_skus.forEach((sku, index) => {\r\n\t\t\t\t\t\t\t\t// \t{ id: 1, name: '45寸（大规格）', price: 788, market_price: 999, num: 0, selected: !0 },\r\n\t\t\t\t\t\t\t\t__skuDatas.push({\r\n\t\t\t\t\t\t\t\t\tid: sku._id,\r\n\t\t\t\t\t\t\t\t\tsku: sku.goods_sku,\r\n\t\t\t\t\t\t\t\t\tname: sku.spec,\r\n\t\t\t\t\t\t\t\t\tprice: sku.price,\r\n\t\t\t\t\t\t\t\t\tmarket_price: sku.market_price || this.goods.market_price,\r\n\t\t\t\t\t\t\t\t\tnum: sku.stock_num,\r\n\t\t\t\t\t\t\t\t\tselected: index == 0\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.skuDatas = __skuDatas;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// SKU\r\n\t\t\t\t\t\tif (this.skuDatas.length > 0) {\r\n\t\t\t\t\t\t\tthis.sku = this.skuDatas[0];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 服务标签\r\n\t\t\t\t\t\tif (typeof this.goods.tags === 'string') {\r\n\t\t\t\t\t\t\tthis.goods.tags = this.goods.tags.split(',').filter(x => x);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet __tagDatas = [];\r\n\r\n\t\t\t\t\t\tthis.goods.tags.forEach((data, index) => {\r\n\t\t\t\t\t\t\t__tagDatas.push({\r\n\t\t\t\t\t\t\t\tname: data,\r\n\t\t\t\t\t\t\t\tselected: index == 0\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.tagDatas = __tagDatas;\r\n\r\n\t\t\t\t\t\t// 收藏状态\r\n\t\t\t\t\t\tthis.favorite = this.goods.collected === 1;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$api.msg(res.msg);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 处理 query q 数据\r\n\t\tresolveQueryq(query) {\r\n\t\t\tconst arr = query\r\n\t\t\t\t.split('/')\r\n\t\t\t\t.slice(-1)[0]\r\n\t\t\t\t.split('_');\r\n\t\t\tif (arr.length == 2) this.mid = arr[1];\r\n\t\t\tthis.id = arr[0];\r\n\t\t},\r\n\t\t// 图片预览\r\n\t\tpreview(imgs, cur) {\r\n\t\t\tif (!imgs) return;\r\n\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: imgs,\r\n\t\t\t\tcurrent: cur,\r\n\t\t\t\tlongPressActions: {\r\n\t\t\t\t\titemList: ['发送给朋友', '保存图片', '收藏'],\r\n\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 打开分享\r\n\t\tshareOpen() {\r\n\t\t\tif (!this.loginCheck()) return;\r\n\t\t\t\r\n\t\t\tthis.shareShow = true;\r\n\t\t},\r\n\t\t// 创建海报\r\n\t\tcreatePoster() {\r\n\t\t\tif (this.posterUrl) {\r\n\t\t\t\tthis.posterShow = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '生成海报中'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// #ifdef MP\r\n\t\t\t// 此处的二维码内容，需自己在小程序端配置普通二维码规则\r\n\t\t\tthis.posterQRcode = `https://usemall.use-cloud.com/wxmp-product/${this.goods._id}_${this.member._id}`;\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// #ifdef H5\r\n\t\t\t// 如果为 h5，二维码内容需配置为线上版本产品详情路径\r\n\t\t\tthis.posterQRcode = `https://usemall-h5.use-cloud.com/#/pages/goods/goods?id=${this.goods._id}&mid=${this.member._id}`;\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\t// 海报二维码生成成功\r\n\t\tposterQRcodeResult(res) {\r\n\t\t\t// 获取产品海报数据\r\n\t\t\tthis.posterData = uposter.getGoodsData(this.member, this.goods, res);\r\n\t\t\t// console.log('this.posterData', this.posterData);\r\n\r\n\t\t\tthis.posterShow = true;\r\n\t\t},\r\n\t\t// 海报生成完成\r\n\t\tposterSuccess(res) {\r\n\t\t\tthis.posterUrl = res;\r\n\r\n\t\t\tuni.hideLoading();\r\n\t\t},\r\n\t\t// 保存海报\r\n\t\tposterSave() {\r\n\t\t\tif (this.posterUrl) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '保存中'\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: this.posterUrl,\r\n\t\t\t\t\tsuccess: function() {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '海报保存成功',\r\n\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 商品SKU\r\n\t\tselectSKU(res) {\r\n\t\t\tthis.skuDatas.forEach(item => {\r\n\t\t\t\tif (res.sku == item.sku) {\r\n\t\t\t\t\tthis.$set(item, 'selected', true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$set(item, 'selected', false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.sku = res;\r\n\t\t},\r\n\r\n\t\t// 评论\r\n\t\ttoevaluate() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/goods/goods-evaluate?id=${this.id}`\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 首页\r\n\t\ttohome() {\r\n\t\t\tthis.$api.tohome();\r\n\t\t},\r\n\t\t// 收藏\r\n\t\ttofavorite() {\r\n\t\t\tif (!this.loginCheck()) return;\r\n\t\t\t\r\n\t\t\tthis.favorite = !this.favorite;\r\n\t\t\tlet _data = {\r\n\t\t\t\tgoods_id: this.id,\r\n\t\t\t\tstate: !this.favorite ? '已取消' : '已收藏'\r\n\t\t\t};\r\n\t\t\tthis.$func.usemall.call('member/collect', _data).then(res => {\r\n\t\t\t\tif (res.datas) {\r\n\t\t\t\t\t!this.favorite ? this.$api.msg('取消成功') : this.$api.msg('收藏成功');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$api.msg(res.msg);\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 加入购物车\r\n\t\ttocart(params) {\r\n\t\t\tif (!this.loginCheck()) return;\r\n\t\t\t\r\n\t\t\tthis.$func.usemall\r\n\t\t\t\t.call('goods/addcart', {\r\n\t\t\t\t\tgoods_id: params._id,\r\n\t\t\t\t\tgoods_num: 1,\r\n\t\t\t\t\tgoods_sku: this.sku.id\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.$api.msg(res.datas.msg);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.$api.msg(res.msg);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 立即购买\r\n\t\ttobuy(item) {\r\n\t\t\tlet _this = this;\r\n\t\t\tif (!this.loginCheck()) return;\r\n\t\t\t\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/order/create?goods_id=${this.id}&sku_id=${this.sku.id || ''}`\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 检测是否已登录\r\n\t\tloginCheck() {\r\n\t\t\tif (!this.islogin) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '授权登录',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t_this.$api.tologin();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\npage {\r\n\tbackground: $page-color-base;\r\n\tpadding-bottom: 120rpx;\r\n}\r\n\r\ncontact-button {\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\twidth: 50px;\r\n\theight: 50px;\r\n}\r\n\r\n.fixed-top {\r\n\tbottom: 230rpx;\r\n}\r\n\r\n/* 01. 轮播区 */\r\n.swiper-area {\r\n\theight: 720rpx;\r\n\ttop: 0;\r\n\tz-index: -1;\r\n}\r\n\r\n/* #ifndef MP */\r\n.swiper-area {\r\n\tmargin-top: calc(44px + env(safe-area-inset-top));\r\n\tmargin-top: 44px;\r\n}\r\n/* #endif */\r\n\r\n/* #ifdef APP-PLUS */\r\n.swiper-area {\r\n\tmargin-top: 0;\r\n}\r\n/* #endif */\r\n\r\n/* 02. 商品数据区 */\r\n.goods-area {\r\n\tmargin-top: 720rpx;\r\n\r\n\t.price-box {\r\n\t\tdisplay: flex;\r\n\t\talign-items: baseline;\r\n\t}\r\n\r\n\t.title {\r\n\t\tcolor: $font-color-dark;\r\n\t\theight: 46rpx;\r\n\t\tline-height: 46rpx;\r\n\t}\r\n}\r\n\r\n.share-area {\r\n\t.vertical-line {\r\n\t\tright: 50%;\r\n\t\theight: 40%;\r\n\t}\r\n}\r\n\r\n/* 03. 规格区 */\r\n.sku-area .active {\r\n\tbackground: $base-color;\r\n\tcolor: #fff !important;\r\n}\r\n\r\n/* 04. 服务区 */\r\n.icon-detail {\r\n\tright: 30rpx;\r\n\ttop: 24rpx;\r\n}\r\n\r\n/* 05. 评价 */\r\n.evaluate-area {\r\n\t.portrait {\r\n\t\tflex-shrink: 0;\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t}\r\n\r\n\t.right-area {\r\n\t\timage {\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t\tmargin-bottom: 10rpx;\r\n\t\t\theight: 200rpx;\r\n\t\t\twidth: 30%;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* 06. 详情区 */\r\n.detail-area {\r\n\t.d-header {\r\n\t\tfont-size: $font-base + 2upx;\r\n\t\tcolor: $font-color-dark;\r\n\t\tposition: relative;\r\n\r\n\t\ttext {\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\tbackground: #fff;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 1;\r\n\t\t}\r\n\r\n\t\t&:after {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t\twidth: 300rpx;\r\n\t\t\theight: 0;\r\n\t\t\tcontent: '';\r\n\t\t\tborder-bottom: 1px solid #ccc;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 产品详情 */\r\n\t.pro-detail {\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t\t-webkit-touch-callout: none;\r\n\r\n\t\timg {\r\n\t\t\twidth: 100%;\r\n\t\t\tmax-width: 100%;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* 07. 操作区 */\r\n.oper-area {\r\n\tleft: 0;\r\n\tbottom: 0;\r\n\tbackground: rgba(255, 255, 255, 0.95);\r\n\tbox-shadow: 0 0 20rpx 0 #f0f0f0;\r\n\theight: 100rpx;\r\n\tz-index: 95;\r\n\r\n\t.btn-area {\r\n\t\tfont-size: $font-sm;\r\n\t\tcolor: $font-color-base;\r\n\t\twidth: 96rpx;\r\n\r\n\t\t.iconfont {\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tline-height: 48rpx;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/* 优惠券区 */\r\n.coupon-area {\r\n\tmax-height: 60vh;\r\n\tmin-height: 30vh;\r\n\r\n\t.coupon-item {\r\n\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t&:last-child {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\t&:after {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\tcontent: '';\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 0;\r\n\t\t\t\tborder-bottom: 1px dashed #f3f3f3;\r\n\t\t\t\ttransform: scaleY(50%);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.circle {\r\n\t\t\tposition: absolute;\r\n\t\t\tbottom: -10rpx;\r\n\t\t\tz-index: 10;\r\n\t\t\twidth: 20rpx;\r\n\t\t\theight: 20rpx;\r\n\t\t\tbackground: #f5f5f5;\r\n\t\t\tborder-radius: 50%;\r\n\r\n\t\t\t&.r {\r\n\t\t\t\tright: -6rpx;\r\n\t\t\t}\r\n\r\n\t\t\t&.l {\r\n\t\t\t\tleft: -6rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./goods.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1692891929217\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}