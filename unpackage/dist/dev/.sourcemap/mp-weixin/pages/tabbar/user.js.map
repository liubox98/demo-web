{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/tabbar/user.vue?4543","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/tabbar/user.vue?10a1","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/tabbar/user.vue?d8fc","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/tabbar/user.vue?6949","uni-app:///pages/tabbar/user.vue","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/tabbar/user.vue?f59c","webpack:///C:/Users/liubo1/Desktop/Demo/demo-web/pages/tabbar/user.vue?ce29"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","computed","data","isreq","historyDatas","stats","actionSheetShow","actionSheetList","actionSheetTips","text","color","size","is_mp","is_alipay","onLoad","onShow","methods","loadData","console","db","where","field","orderBy","get","then","res","x","_historyDatas","openActionSheet","actionSheetClose","actionSheetClick","to","uni","url","toOrder","key","success","complete","togoods","id"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,wOAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAA8lB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACyIlnB;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA;AAGA;AAAA,eACA;EACAC,4BACA,2CACA;EACAC;IACA;MACAC;MACA;MACAC;MACA;MACAC;MAEAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MAEAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACA;MACA;MACA;IACA;IAEA;EACA;EACAC,yCACA;IACA;IACAC;MAAA;MAEA;QACA;UACA;UACAC;UAEA;UACA;UACA;YACA;UACA;QACA;MACA;;MAEA;MACA;MAEAC,kDACAC,gCACAC,gHACAC,iCACAC,MACAC;QACA;UACA;UACAC;YACAC;YACAA;YACAA;YACAC;UACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;MAEA;QACA;UACAnB;UACAC;QACA;UACAD;UACAC;QACA;MAEA;IACA;IACA;IACAmB;MACAX;IACA;IACA;IACAY;MAAA;MACA;QACA;UACA;UACA;UACA;YACA;UACA;UACA;QACA;UACA;UACA;MAAA;IAEA;IAEA;IACAC;MACA;QACA;QACA;MACA;MAEAC;QACAC;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;MACA;MAEAF;QACAG;QACAjC;QACAkC;UACAlB;QACA;QACAmB;UACAL;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAK;MACA;QACAC;MACA;IACA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;;ACpSA;AAAA;AAAA;AAAA;AAAyoC,CAAgB,+mCAAG,EAAC,C;;;;;;;;;;;ACA7pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabbar/user.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/tabbar/user.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user.vue?vue&type=template&id=2bf7e0f3&\"\nvar renderjs\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabbar/user.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=template&id=2bf7e0f3&\"","var components\ntry {\n  components = {\n    useListTitle: function () {\n      return import(\n        /* webpackChunkName: \"components/use-list-title/use-list-title\" */ \"@/components/use-list-title/use-list-title.vue\"\n      )\n    },\n    useActionSheet: function () {\n      return import(\n        /* webpackChunkName: \"components/use-action-sheet/use-action-sheet\" */ \"@/components/use-action-sheet/use-action-sheet.vue\"\n      )\n    },\n    useCopyright: function () {\n      return import(\n        /* webpackChunkName: \"components/use-copyright/use-copyright\" */ \"@/components/use-copyright/use-copyright.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"user-area\">\r\n\t\t<view class=\"header-area padding-lr-sm\" :class=\"(is_mp && !is_alipay) ? 'padding-top-big' : 'padding-top'\">\r\n\t\t\t<view class=\"dflex-b\">\r\n\t\t\t\t<view class=\"member-area padding-top-sm margin-bottom dflex pos-r\" @click=\"to('/pages/user/setting/personal')\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<image class=\"headimg border-radius-c\" :src=\"member.member_headimg || '/static/images/user/default.png'\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-left-sm\">\r\n\t\t\t\t\t\t<view class=\"info-box\">\r\n\t\t\t\t\t\t\t<text class=\"fs-lg\">{{ member.member_name || member.member_nickname || '用云' }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"member.member_city\"><text class=\"fs-xxs\">{{ member.member_city }}</text></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"border-radius-big bg-base dflex-c padding-lr\" @click=\"to('/pages/user/integral/sign')\">\r\n\t\t\t\t\t<view class=\"iconfont fs-xl iconqiandao margin-right-xs\"></view>\r\n\t\t\t\t\t<view>签到</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"border-radius\">\r\n\t\t\t\t<view class=\"vip-card-area pos-r padding-lr padding-tb-sm\">\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<text class=\"iconfont iconhuiyuan\"></text>\r\n\t\t\t\t\t\t<text class=\"margin-left-sm\">用云电商 会员</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"stats-area dflex-c bg-main\">\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"toOrder('/pages/user/order/order', '全部')\">\r\n\t\t\t\t\t\t<text class=\"num\">{{ member.member_monetary / 100 || 0 }}</text>\r\n\t\t\t\t\t\t<text>累计消费</text>\r\n\t\t\t\t\t\t<view class=\"vertical-line\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"to('/pages/user/coupon/coupon')\">\r\n\t\t\t\t\t\t<text class=\"num\">{{ member.member_coupon_cnt || 6 }}</text>\r\n\t\t\t\t\t\t<text>优惠券</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"container-area padding-lr-sm padding-bottom-sm\">\r\n\t\t\t<!-- 我的订单 -->\r\n\t\t\t<view class=\"border-radius margin-top-sm bg-main\">\r\n\t\t\t\t<use-list-title title=\"我的订单\" iconfont=\"icondingdan\" color=\"#ff6a6c\" fwt=\"600\" tip=\"查看全部订单\"\r\n\t\t\t\t\t@goto=\"toOrder('/pages/user/order/order', '全部')\"></use-list-title>\r\n\r\n\t\t\t\t<view class=\"order-area padding-bottom-sm padding-lr dflex-c\">\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"toOrder('/pages/user/order/order', '待付款')\">\r\n\t\t\t\t\t\t<view class=\"iconfont\">&#xe6da;<view class=\"badge badge-small\"\r\n\t\t\t\t\t\t\t\tv-if=\"stats && stats.order_state && stats.order_state['待付款'] > 0\">\r\n\t\t\t\t\t\t\t\t{{stats.order_state['待付款']}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>待付款</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"toOrder('/pages/user/order/order', '待发货')\">\r\n\t\t\t\t\t\t<view class=\"iconfont\">&#xe6d9;<view class=\"badge badge-small\"\r\n\t\t\t\t\t\t\t\tv-if=\"stats && stats.order_state && stats.order_state['待发货'] > 0\">\r\n\t\t\t\t\t\t\t\t{{stats.order_state['待发货']}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>待发货</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"toOrder('/pages/user/order/order', '待收货')\">\r\n\t\t\t\t\t\t<view class=\"iconfont\">&#xe6d7;<view class=\"badge badge-small\"\r\n\t\t\t\t\t\t\t\tv-if=\"stats && stats.order_state && stats.order_state['待收货'] > 0\">\r\n\t\t\t\t\t\t\t\t{{stats.order_state['待收货']}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>待收货</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"toOrder('/pages/user/order/order', '待评价')\">\r\n\t\t\t\t\t\t<view class=\"iconfont\">&#xe6db;<view class=\"badge badge-small\"\r\n\t\t\t\t\t\t\t\tv-if=\"stats && stats.order_state && stats.order_state['待评价'] > 0\">\r\n\t\t\t\t\t\t\t\t{{stats.order_state['待评价']}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>待评价</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item dflex dflex-flow-c\" @click=\"toOrder('/pages/user/order/order', '售后中')\">\r\n\t\t\t\t\t\t<view class=\"iconfont\">&#xe715;<view class=\"badge badge-small\"\r\n\t\t\t\t\t\t\t\tv-if=\"stats && stats.order_state && stats.order_state['售后中'] > 0\">\r\n\t\t\t\t\t\t\t\t{{stats.order_state['售后中']}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>售后/退款</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"border-radius margin-top-sm bg-main\">\r\n\t\t\t\t<!-- 我的足迹 -->\r\n\t\t\t\t<use-list-title title=\"我的足迹\" iconfont=\"iconzuji\" color=\"#ffab6c\" fwt=\"600\" :tip=\"stats.browsing\"\r\n\t\t\t\t\t@goto=\"to('/pages/user/browsing/browsing')\"></use-list-title>\r\n\t\t\t\t<scroll-view scroll-x class=\"browsing-area padding-lr\">\r\n\t\t\t\t\t<view class=\"dflex\">\r\n\t\t\t\t\t\t<view v-for=\"(item, index) in historyDatas\" :key=\"index\">\r\n\t\t\t\t\t\t\t<image class=\"border-radius-sm margin-right-sm\" @click=\"togoods(item)\" :src=\"item.img\"\r\n\t\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t<use-list-title title=\"我的收藏\" iconfont=\"iconshoucang-\" color=\"#ff6a6c\" fwt=\"600\" :tip=\"stats.collect\"\r\n\t\t\t\t\t@goto=\"to('/pages/user/collect/collect')\"></use-list-title>\r\n\t\t\t\t<use-list-title title=\"分销中心\" iconfont=\"iconyixiaoshou\" color=\"#ffab6c\" fwt=\"600\" tip=\"分享赚钱\"\r\n\t\t\t\t\t@goto=\"to('/pages/user/distribution/distribution')\"></use-list-title>\r\n\t\t\t\t<use-list-title title=\"收货人\" iconfont=\"icondizhi-\" color=\"#5a9ded\" fwt=\"600\"\r\n\t\t\t\t\t@goto=\"to('/pages/user/address/address')\"></use-list-title>\r\n\t\t\t\t<use-list-title title=\"设置\" iconfont=\"iconshezhi-\" color=\"#58bc8a\" fwt=\"600\"\r\n\t\t\t\t\t@goto=\"to('/pages/user/setting/setting')\"></use-list-title>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-if=\"islogin\" class=\"border-radius margin-top-sm padding-sm dflex-c bg-main log-out-btn\"\r\n\t\t\t\t@click=\"openActionSheet\">\r\n\t\t\t\t<text class=\"cell-tit\">退出登录</text>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"border-radius margin-top-sm padding-sm dflex-c bg-main log-out-btn\"\r\n\t\t\t\t@click=\"to('/pages/login/login')\">\r\n\t\t\t\t<text class=\"cell-tit\">去登录</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 操作菜单 -->\r\n\t\t\t<use-action-sheet v-model=\"actionSheetShow\" :list=\"actionSheetList\" :tips=\"actionSheetTips\"\r\n\t\t\t\t@click=\"actionSheetClick\" @close=\"actionSheetClose\"></use-action-sheet>\r\n\t\t</view>\r\n\r\n\t\t<!-- 用云版权 -->\r\n\t\t<use-copyright></use-copyright>\r\n\t</view>\r\n</template>\r\n<script>\r\n\tconst db = uniCloud.database();\r\n\t\r\n\timport { mapState, mapMutations } from 'vuex';\r\n\tconst _history = 'usemall-goods-history'\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['islogin', 'member'])\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisreq: false,\r\n\t\t\t\t// 浏览历史\r\n\t\t\t\thistoryDatas: {},\r\n\t\t\t\t// 统计数据\r\n\t\t\t\tstats: {},\r\n\r\n\t\t\t\tactionSheetShow: false,\r\n\t\t\t\tactionSheetList: [],\r\n\t\t\t\tactionSheetTips: {\r\n\t\t\t\t\ttext: \"\",\r\n\t\t\t\t\tcolor: \"#9a9a9a\",\r\n\t\t\t\t\tsize: 24\r\n\t\t\t\t},\r\n\r\n\t\t\t\tis_mp: false,\r\n\t\t\t\tis_alipay: false,\r\n\t\t\t};\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.is_mp = this.$env.is_mp;\r\n\t\t\t\tthis.is_alipay = this.$env.platform == 'alipay';\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tlet _this = this;\r\n\t\t\tif (!this.islogin) {\r\n\t\t\t\tthis.$api.msg('账号未登录');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.loadData();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['logout', 'putMember']),\r\n\t\t\t// 加载数据\r\n\t\t\tloadData() {\r\n\r\n\t\t\t\tthis.$func.usemall.call('member/data').then(res => {\r\n\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\tthis.putMember(res.datas.member);\r\n\t\t\t\t\t\tconsole.log('member/data', res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.stats = res.datas.stats;\r\n\t\t\t\t\t\tthis.stats.order_state = {};\r\n\t\t\t\t\t\tthis.stats.order.forEach(_order => {\r\n\t\t\t\t\t\t\tthis.stats.order_state[_order._id] = _order.num;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// 浏览历史\r\n\t\t\t\tconst goodsTemp = db.collection('usemall-goods').getTemp();\r\n\t\t\t\t\r\n\t\t\t\tdb.collection('usemall-goods-history', goodsTemp)\r\n\t\t\t\t\t.where('create_uid == $env.uid')\r\n\t\t\t\t\t.field('visit_cnt, last_modify_time, goods._id as goods_id, goods.img as goods_img, goods.state as goods_state')\r\n\t\t\t\t\t.orderBy('last_modify_time desc') \r\n\t\t\t\t\t.get()\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res && res.result && res.result.errCode === 0) {\r\n\t\t\t\t\t\t\tlet _historyDatas = [];\r\n\t\t\t\t\t\t\tres.result.data.forEach(x => {\r\n\t\t\t\t\t\t\t\tx._id = x.goods_id[0];\r\n\t\t\t\t\t\t\t\tx.img = x.goods_img[0];\r\n\t\t\t\t\t\t\t\tx.state = x.goods_state[0];\r\n\t\t\t\t\t\t\t\t_historyDatas.push(x);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.historyDatas = _historyDatas;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 打开操作菜单\r\n\t\t\topenActionSheet() {\r\n\t\t\t\tthis.actionSheetShow = true;\r\n\r\n\t\t\t\tthis.$api.timerout(() => {\r\n\t\t\t\t\tthis.actionSheetList = [{\r\n\t\t\t\t\t\ttext: \"退出登录\",\r\n\t\t\t\t\t\tcolor: \"#333\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttext: \"切换账号\",\r\n\t\t\t\t\t\tcolor: \"#333\"\r\n\t\t\t\t\t}, ];\r\n\r\n\t\t\t\t}, 0);\r\n\t\t\t},\r\n\t\t\t// 关闭操作菜单\r\n\t\t\tactionSheetClose() {\r\n\t\t\t\tconsole.log(this.actionSheetShow);\r\n\t\t\t},\r\n\t\t\t// 点击操作菜单\r\n\t\t\tactionSheetClick(index) {\r\n\t\t\t\tswitch (index) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tthis.$api.msg('退出成功');\r\n\t\t\t\t\t\tthis.logout();\r\n\t\t\t\t\t\tthis.$api.timerout(() => {\r\n\t\t\t\t\t\t\tthis.$api.tohome();\r\n\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tthis.$api.tologin();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 统一跳转接口，拦截未登录路由\r\n\t\t\tto(url) {\r\n\t\t\t\tif (!this.islogin) {\r\n\t\t\t\t\tthis.$api.tologin()\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 跳转到 订单\r\n\t\t\ttoOrder(url, state) {\r\n\t\t\t\tif (!this.islogin) {\r\n\t\t\t\t\tthis.$api.tologin()\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: '__order_state',\r\n\t\t\t\t\tdata: state,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 跳转商品详情\r\n\t\t\ttogoods(item) {\r\n\t\t\t\tthis.$api.togoods({\r\n\t\t\t\t\tid: item._id\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tmin-height: 100%;\r\n\t\tbackground: $page-color-base;\r\n\t}\r\n\r\n\t.member-area {\r\n\t\timage {\r\n\t\t\twidth: 130rpx;\r\n\t\t\theight: 130rpx;\r\n\t\t\tborder: 5rpx solid #fff;\r\n\t\t}\r\n\t}\r\n\r\n\t.vip-card-area {\r\n\t\tcolor: #f7d680;\r\n\t\tbackground: linear-gradient(to left, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.8));\r\n\t}\r\n\r\n\t.stats-area {\r\n\t\t.item {\r\n\t\t\tpadding: 30rpx 0;\r\n\t\t}\r\n\r\n\t\t.num {\r\n\t\t\tfont-size: $font-lg;\r\n\t\t\tcolor: $font-color-dark;\r\n\t\t\tmargin-bottom: 6rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.order-area {\r\n\t\t.item {}\r\n\r\n\t\t.iconfont {\r\n\t\t\tposition: relative;\r\n\t\t\tfont-size: $font-lg + 8upx;\r\n\r\n\t\t\t.badge {\r\n\t\t\t\tright: initial;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.stats-area .item,\r\n\t.order-area .item {\r\n\t\tposition: relative;\r\n\t\tfont-size: $font-sm;\r\n\t\tcolor: $font-color-base;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.browsing-area {\r\n\t\timage {\r\n\t\t\twidth: 160rpx;\r\n\t\t\theight: 160rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t::-webkit-scrollbar {\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tcolor: transparent;\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.log-out-btn {\r\n\t\tcolor: $font-color-base;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1692891928775\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}